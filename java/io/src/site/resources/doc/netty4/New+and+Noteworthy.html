<!--?xml version="1.0" encoding="UTF-8" ?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
                    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                                    <title>Netty: New and Noteworthy (Documentation.New and Noteworthy)</title>
                <meta http-equiv="Content-Script-Type" content="text/javascript">
                        <meta http-equiv="imagetoolbar" content="no">
                      <link rel="alternate" type="application/x-wiki" title="Edit" href="https://netty.io/edit/Documentation/New+and+Noteworthy">
                    <link rel="canonical" href="https://netty.io/Documentation/New+and+Noteworthy">
                            <meta name="document" content="Documentation.New and Noteworthy">
    <meta name="wiki" content="xwiki">
    <meta name="space" content="Documentation">
    <meta name="page" content="New and Noteworthy">
    <meta name="version" content="62.1">
    <meta name="restURL" content="/rest/wikis/xwiki/spaces/Documentation/pages/New+and+Noteworthy">
    <meta name="form_token" content="ExaA8rsAoqleen0mELnU5Q">
                <meta name="gwt:property" content="locale=en">
                <meta name="revisit-after" content="7 days">
<meta name="description" content="New and Noteworthy">
<meta name="keywords" content="wiki">
<meta name="distribution" content="GLOBAL">
<meta name="rating" content="General">
<meta name="author" content="Norman Maurer">
<meta http-equiv="reply-to" content="">
<meta name="language" content="en">
<link rel="shortcut icon" href="https://netty.io/favicon.ico">
<link rel="alternate" type="application/rss+xml" title="Wiki Feed RSS" href="https://netty.io/Main/WebRss?xpage=rdf">
<link rel="alternate" type="application/rss+xml" title="Blog RSS Feed" href="http://feeds.feedburner.com/netty_project">

                
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
                                                                        
       
<link href="New+and+Noteworthy_files/style.css" rel="stylesheet" type="text/css" media="all">
<link href="New+and+Noteworthy_files/print.css" rel="stylesheet" type="text/css" media="print">
        <!--[if IE]>
  <link href="/skin/skins/netty/ie%2Dall.css?colorTheme=ColorThemes.Netty" rel="stylesheet" type="text/css" />
<![endif]-->
<!--[if IE 6]>
  <link href="/skin/skins/netty/ie%2D6.css?colorTheme=ColorThemes.Netty" rel="stylesheet" type="text/css" />
<![endif]-->
<link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/Settings.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/Style.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/SharePage.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/BlogStyle.css">
<link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/modalPopup.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/jumpToPage.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/confirmationBox.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/notification.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/searchSuggest.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/attachments.css"><link rel="stylesheet" type="text/css" href="New+and+Noteworthy_files/pagination.css">

    
    <link href="New+and+Noteworthy_files/suggest.css" rel="stylesheet" type="text/css">
<link href="New+and+Noteworthy_files/lightbox.css" rel="stylesheet" type="text/css">
<!--[if IE]>
  <link href="/skin/resources/js/xwiki/lightbox/lightboxIE.css" rel="stylesheet" type="text/css" />
<![endif]-->












                                                                                         
   
  <script src="New+and+Noteworthy_files/ga.js" async="" type="text/javascript"></script><script src="New+and+Noteworthy_files/widgets.js" id="twitter-wjs"></script><script type="text/javascript" src="New+and+Noteworthy_files/prototype.js"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/xwiki.js"></script>
<script type="text/javascript">
// <![CDATA[
XWiki.webapppath = "";
XWiki.servletpath = "";
XWiki.contextPath = "";
XWiki.mainWiki = "xwiki";
XWiki.currentWiki = "xwiki";
XWiki.currentSpace = "Documentation";
XWiki.currentPage = "New and Noteworthy";
XWiki.editor = "";
XWiki.viewer = "";
XWiki.contextaction = "view";
XWiki.docisnew = false;
XWiki.docsyntax = "xwiki/2.1";
XWiki.docvariant = "";
XWiki.blacklistedSpaces = [ "Import","Panels","Scheduler","Stats","XAppClasses","XAppSheets","XAppTemplates","XWiki","WatchCode","WatchSheets","XApp","WatchAdmin","Watch","ColorThemes","AnnotationCode" ];
XWiki.hasEdit = false;
XWiki.hasProgramming = false;
XWiki.hasBackupPackImportRights = false;
window.docviewurl = "/Documentation/New+and+Noteworthy";
window.docediturl = "/edit/Documentation/New+and+Noteworthy";
window.docsaveurl = "/save/Documentation/New+and+Noteworthy";
window.docgeturl = "/get/Documentation/New+and+Noteworthy";
// ]]>
</script>
<script type="text/javascript" src="New+and+Noteworthy_files/effects.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/modalPopup.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/jumpToPage.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/confirmationBox.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/confirmedAjaxRequest.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/notification.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/xlist.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/suggest.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/searchSuggest.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/attachments.js" defer="defer"></script>

<script type="text/javascript" src="New+and+Noteworthy_files/Settings.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/GoogleAnalyticsCode.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/Script.js" defer="defer"></script>
<script type="text/javascript" src="New+and+Noteworthy_files/BlogScripts.js" defer="defer"></script>

<script type="text/javascript" src="New+and+Noteworthy_files/compatibility.js" defer="defer"></script>

  <script src="New+and+Noteworthy_files/embed.js" async="" type="text/javascript"></script><script src="New+and+Noteworthy_files/count.js" type="text/javascript" async=""></script><script charset="UTF-8" async="" src="New+and+Noteworthy_files/thread.js"></script><link href="New+and+Noteworthy_files/defaults.css" type="text/css" rel="stylesheet"><script charset="UTF-8" async="" src="New+and+Noteworthy_files/disqus.js"></script><link href="New+and+Noteworthy_files/dsq7884a9652e94555c70f96b6be63be216.css" type="text/css" rel="stylesheet"><script charset="UTF-8" async="" src="New+and+Noteworthy_files/dsq7884a9652e94555c70f96b6be63be216.js"></script><script charset="UTF-8" async="" src="New+and+Noteworthy_files/event.js"></script></head>
  <body data-twttr-rendered="true" id="body" class="wiki-xwiki space-Documentation viewbody hideleft">
<div id="xwikimaincontainer">
<div id="xwikimaincontainerinner">

  <div id="menuview">
    <div id="mainmenu" class="layoutsubsection actionmenu">
<div class="gradientfilterIE"></div>
<div class="componentcontainer">
<strong id="xwikimenutitle" class="hidden">General Actions:</strong>
<div class="rightmenu">
      <div id="tmLogin" class="tmLogin topmenuentry ">
   <a class="tme" href="https://netty.io/login/XWiki/XWikiLogin?xredirect=%2FDocumentation%2FNew%2Band%2BNoteworthy"><strong>Log-in</strong></a>
  </div>
    <div id="tmRegister" class="tmRegister topmenuentry ">
   <a class="tme" href="https://netty.io/register/XWiki/Register"><strong>Register</strong></a>
  </div>
</div>
<div class="leftmenu">
  <div id="tmWiki" class="tmWiki topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme" href="https://netty.io/Main/WebHome"><strong>Wiki</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
              <span class="submenuitem "><a href="https://netty.io/Main/AllDocs" id="tmWikiDocumentIndex" class="tmWikiDocumentIndex">Document Index</a></span>
      </span></div>
<div class="topmenuentry"><span class="separator">»</span></div>
  <div id="tmSpace" class="tmSpace topmenuentry dropdownmenuentry  hasIcon" onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
      <span class="tmetype">Space: </span><a class="tme hastype" href="https://netty.io/Documentation/WebHome"><strong>Documentation</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
              <span class="submenuitem "><a href="https://netty.io/Main/SpaceIndex?space=Documentation" id="tmSpaceDocumentIndex" class="tmSpaceDocumentIndex">Document Index</a></span>
      </span></div>
<div class="topmenuentry"><span class="separator">»</span></div>
  <div id="tmPage" class="tmPage topmenuentry hasIcon">
      <span class="tmetype">Page: </span><a class="tme hastype" href="https://netty.io/Documentation/New+and+Noteworthy"><strong>New and Noteworthy</strong></a>
  </div>
</div>
</div>
</div>

  </div>
 <div id="headerglobal" class="layoutsection">
<div class="minwidthb"></div>
  <div id="company">
  <div id="companylogo">
    <a href="https://netty.io/Main/WebHome" title="Home" rel="home">
        <img src="New+and+Noteworthy_files/logo.png" alt="Wiki Logo">
    </a>
  </div>   </div>   <div id="globallinks">
    <form action="/Main/Search">
      <div class="globalsearch">
        <label class="hidden" for="headerglobalsearchinput">Search</label><input autocomplete="off" class="globalsearchinput withTip" id="headerglobalsearchinput" name="text" value="search..." size="15" type="text"><input class="button" value="Go" alt="Go" src="New+and+Noteworthy_files/search.png" type="image">
      </div>
    </form>
  </div>   <div class="clearfloats"></div>
</div> 

<div class="contenthideleft" id="contentcontainer">
<div id="contentcontainerinner">
<div class="leftsidecolumns">
  <div id="contentcolumn"> 
          <div class="main layoutsubsection">
      <div style="position: fixed; top: 0px; left: 262px; width: 725px;" id="contentmenu" class="actionmenu floating-menu">
    <div class="gradientfilterIE"></div>
<div class="componentcontainer">
<strong id="xwikicontentmenutitle" class="hidden">Page Actions:</strong>
<div class="rightmenu">
<div id="tmAnnotations" class="topmenuentry hasIcon"><a href="#Comments" class="tme"><strong>Annotations</strong></a></div></div>
<div class="leftmenu">
  <div id="tmExport" class="tmExport topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>Export</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="https://netty.io/Documentation/New+and+Noteworthy?xpage=pdfoptions" id="tmExportPdf" class="tmExportPdf">Export as PDF</a></span>
    <span class="submenuitem "><a href="https://netty.io/export/Documentation/New+and+Noteworthy?format=rtf" id="tmExportRtf" class="tmExportRtf">Export as RTF</a></span>
  <span class="submenuitem "><a href="https://netty.io/export/Documentation/New+and+Noteworthy?format=html" id="tmExportHtml" class="tmExportHtml">Export as HTML</a></span>
    </span></div>
  <div id="tmMoreActions" class="tmMoreActions topmenuentry dropdownmenuentry dropdownnolink " onmouseover="showsubmenu(this);" onmouseout="hidesubmenu(this);">
<span class="tme-extensible">
   <a class="tme"><strong>More actions</strong></a>
    <span class="menuarrow">▼</span><span class="hidden menucolon">: </span>
</span><span class="submenu hidden">
  <span class="submenuitem "><a href="https://netty.io/Documentation/New+and+Noteworthy?xpage=print" id="tmPrintPreview" class="tmPrintPreview">Print preview</a></span>
  <span class="submenuitem "><a href="https://netty.io/Documentation/New+and+Noteworthy?viewer=code" id="tmViewSource" class="tmViewSource">View Source</a></span>
  </span></div>
</div>
</div>
    </div><div style="left: 262px; top: 100px; height: 23px;"></div>
    <div id="mainContentArea">
  
   <div id="hierarchy">
                                          <a href="https://netty.io/Main/WebHome">Home</a> <span class="separator">»</span> <a href="https://netty.io/Documentation/WebHome">Documentation</a> <span class="separator">»</span> <span class="current">New and Noteworthy</span>
                      </div>

          
<div id="document-title"><h1>New and Noteworthy</h1></div>

<div id="xwikicontent">
<div class="box infomessage">This document is a work-in-progress. 
&nbsp;Please feel free to contribute to this document or leave a comment
 if you find something is missing, wrong, or not explained enough.</div><p>This
 document walks you through the list of notable changes and new features
 in the major Netty release to give you an idea to port your application
 to the new version.</p><ul><li><span class="wikilink"><a href="#HChangesin4.0">Changes in 4.0</a></span><ul><li><span class="wikilink"><a href="#HProjectstructurechanges">Project structure changes</a></span></li><li><span class="wikilink"><a href="#HOSGI-fy">OSGI-fy</a></span></li><li><span class="wikilink"><a href="#HMethod-Chainingalltheway">Method-Chaining all the way</a></span></li><li><span class="wikilink"><a href="#HBufferAPIchanges">Buffer API changes</a></span><ul><li><span class="wikilink"><a href="#HChannelBuffer2192ByteBuf">ChannelBuffer → ByteBuf</a></span></li><li><span class="wikilink"><a href="#HMostbuffersaredynamicwithconfigurablemaximumcapacity">Most buffers are dynamic with configurable maximum capacity</a></span></li><li><span class="wikilink"><a href="#HNewinterface:CompositeByteBuf">New interface: CompositeByteBuf</a></span></li><li><span class="wikilink"><a href="#HPredictableNIObufferconversion">Predictable NIO buffer conversion</a></span></li><li><span class="wikilink"><a href="#HLittleendiansupportchanges">Little endian support changes</a></span></li></ul></li><li><span class="wikilink"><a href="#HPooledByteBuf">Pooled ByteBuf</a></span></li><li><span class="wikilink"><a href="#HChannelAPIchanges">Channel API changes</a></span><ul><li><span class="wikilink"><a href="#HRevampedChannelHandlerinterface">Revamped ChannelHandler interface</a></span><ul><li><span class="wikilink"><a href="#HUpstream2192Inbound2CDownstream2192Outbound">Upstream → Inbound, Downstream → Outbound</a></span></li><li><span class="wikilink"><a href="#HNewChannelHandlerhierarchy">New ChannelHandler hierarchy</a></span></li><li><span class="wikilink"><a href="#HChannelHandlerwithnoeventobject">ChannelHandler with no event object</a></span></li><li><span class="wikilink"><a href="#HSimplifiedchannelstatemodel">Simplified channel state model</a></span></li><li><span class="wikilink"><a href="#HPer-handlerbuffer">Per-handler buffer</a></span><ul><li><span class="wikilink"><a href="#HNotnecessarilyoneeventpermessage">Not necessarily one event per message</a></span></li><li><span class="wikilink"><a href="#HMessagehandlervs.Bytehandler">Message handler vs. Byte handler</a></span></li><li><span class="wikilink"><a href="#HHandleradapters">Handler adapters</a></span></li></ul></li></ul></li><li><span class="wikilink"><a href="#HSensibleandlesserror-proneinboundtrafficsuspension">Sensible and less error-prone inbound traffic suspension</a></span><ul><li><span class="wikilink"><a href="#HSuspensionofacceptingincomingconnections">Suspension of accepting incoming connections</a></span></li></ul></li><li><span class="wikilink"><a href="#HHalf-closedsockets">Half-closed sockets</a></span></li><li><span class="wikilink"><a href="#HFlexibleI2FOthreadallocation">Flexible I/O thread allocation</a></span></li><li><span class="wikilink"><a href="#HAbilitytocreateaChannelfromanexistingJDKsocket">Ability to create a Channel from an existing JDK socket</a></span></li><li><span class="wikilink"><a href="#HDeregistrationandre-registraionofaChannelfromB7toanI2FOthread">Deregistration and re-registraion of a Channel from·to an I/O thread</a></span></li><li><span class="wikilink"><a href="#HSchedulinganarbitrarytasktoberunbyanI2FOthread">Scheduling an arbitrary task to be run by an I/O thread</a></span></li><li><span class="wikilink"><a href="#HSimplifiedshutdown">Simplified shutdown</a></span></li><li><span class="wikilink"><a href="#HType-safeChannelOptions">Type-safe ChannelOptions</a></span></li><li><span class="wikilink"><a href="#HReadmodes">Read modes</a></span></li><li><span class="wikilink"><a href="#HAttributeMap">AttributeMap</a></span></li><li><span class="wikilink"><a href="#HNewbootstrapAPI">New bootstrap API</a></span><ul><li><span class="wikilink"><a href="#HChannelPipelineFactory2192ChannelInitializer">ChannelPipelineFactory → ChannelInitializer</a></span></li></ul></li><li><span class="wikilink"><a href="#HChannelFuturesplittoChannelFutureandChannelPromise">ChannelFuture split to ChannelFuture and ChannelPromise</a></span></li></ul></li><li><span class="wikilink"><a href="#HWell-definedthreadmodel">Well-defined thread model</a></span><ul><li><span class="wikilink"><a href="#HNomoreExecutionHandler-it27sinthecore.">No more ExecutionHandler - it's in the core.</a></span></li></ul></li><li><span class="wikilink"><a href="#HCodecframeworkchanges">Codec framework changes</a></span><ul><li><span class="wikilink"><a href="#HCodecembedder2192EmbeddedChannel">Codec embedder → EmbeddedChannel</a></span></li><li><span class="wikilink"><a href="#HHTTPcodec">HTTP codec</a></span></li></ul></li><li><span class="wikilink"><a href="#HChangesintransportimplementations">Changes in transport implementations</a></span></li><li><span class="wikilink"><a href="#HCasestudy:portingtheFactorialexample">Case study: porting the Factorial example</a></span><ul><li><span class="wikilink"><a href="#HPortingtheserver">Porting the server</a></span></li><li><span class="wikilink"><a href="#HPortingtheclient">Porting the client</a></span></li></ul></li></ul></li></ul><h1 id="HChangesin4.0"><span>Changes in 4.0</span></h1><h2 id="HProjectstructurechanges"><span>Project structure changes</span></h2><p>The package name of Netty has been changed from <tt>org.jboss.netty</tt> to <tt>io.netty</tt> since <span class="wikilink"><a href="https://netty.io/Blog/Announcing+the+new+web+site">we are not part of JBoss.org anymore.</a></span></p><p>The
 binary JAR has been split into multiple submodules so that a user can 
exclude unnecessary features from the class path. &nbsp;The current 
structure looks like this following:</p><div class="box code">netty/<br>&nbsp;&nbsp;&nbsp;common/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- utility and logging<br>&nbsp;&nbsp;&nbsp;buffer/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- buffer API<br>&nbsp;&nbsp;&nbsp;transport/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- channel API and its core implementations<br>&nbsp;&nbsp;&nbsp;transport-rtrx/ &nbsp;- RTRX transport implementation<br>&nbsp;&nbsp;&nbsp;transport-sctp/ &nbsp;- SCTP transport implementation<br>&nbsp;&nbsp;&nbsp;transport-udt/ &nbsp;&nbsp;- UDT transport implementation<br>&nbsp;&nbsp;&nbsp;handler/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- channel handlers<br>&nbsp;&nbsp;&nbsp;codec/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- codec framework<br>&nbsp;&nbsp;&nbsp;codec-http/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- HTTP, Web Sockets, SPDY, and RTSP codec<br>&nbsp;&nbsp;&nbsp;example/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- examples<br>&nbsp;&nbsp;&nbsp;all/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- generates an all-in-one JAR<br>&nbsp;&nbsp;&nbsp;tarball/ &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- generates a tarball distribution</div><p>If a user prefers the old all-in-one JAR, it's not deprecated but provided as before as a Maven repository artifact (<tt>io.netty:netty-all:jar</tt>)</p><h2 id="HOSGI-fy" style="font-family: Ubuntu, 'Liberation Sans', 'Droid Sans', Helvetica, sans-serif; font-style: normal; line-height: 1.2em; "><span>OSGI-fy</span></h2><p>All Netty jars (except of the netty-all) are now OSGI bundles and can be used in your favorite OSGI-Container.</p><div class="wikimodel-emptyline"></div><h2 id="HMethod-Chainingalltheway" style="font-family: Ubuntu, 'Liberation Sans', 'Droid Sans', Helvetica, sans-serif; font-style: normal; line-height: 1.2em; "><span>Method-Chaining all the way</span></h2><p>Most of operations in Netty now support method chaining to make the usage less cumbersome.</p><h2 id="HBufferAPIchanges"><span>Buffer API changes</span></h2><h3 id="HChannelBuffer2192ByteBuf"><span><tt>ChannelBuffer</tt> → <tt>ByteBuf</tt></span></h3><p>Thanks
 to the structural changes mentioned above, the buffer API can be used 
as a separate package. &nbsp;Therefore, the type name <tt>ChannelBuffer</tt> does not make sense anymore, and has been renamed to <tt>ByteBuf</tt>.</p><p>The utility class <tt>ChannelBuffers</tt>, which creates a new buffer, has been split into two utility classes, <tt>Unpooled</tt> and <tt>ByteBufUtil</tt>.
 &nbsp;As can be guessed from its name, 4.0 introduced pooled ByteBufs 
which can be allocated via the ByteBufAllocator implementations.</p><h3 id="HMostbuffersaredynamicwithconfigurablemaximumcapacity"><span>Most buffers are dynamic with configurable maximum capacity</span></h3><p>In
 3.x, buffers were fixed or dynamic. &nbsp;The capacity of a fixed 
buffer does not change once it is created while the capacity of a 
dynamic buffer changes whenever <tt>write*(...)</tt> method requires more space.</p><p>Since
 4.0, all buffers are dynamic. &nbsp;However, it's better than the old 
dynamic. &nbsp;You can decrease or increase the capacity of a buffer 
more easily and more safely. &nbsp;It's easy because there is a new 
method <tt>ByteBuf.capacity(int newCapacity)</tt>. It's safe because you can set the maximum capacity of a buffer so that it does not grow boundlessly.</p><script src="New+and+Noteworthy_files/3162371.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3162371" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="c1">// No more dynamicBuffer() - use buffer().</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="n">ByteBuf</span> <span class="n">buf</span> <span class="o">=</span> <span class="n">ByteBuf</span><span class="o">.</span><span class="na">buffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC3">&nbsp;</div><div class="line" id="file-gistfile1-java-LC4"><span class="c1">// Increase the capacity of the buffer.</span></div><div class="line" id="file-gistfile1-java-LC5"><span class="n">buf</span><span class="o">.</span><span class="na">capacity</span><span class="o">(</span><span class="mi">1024</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC6"><span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC7">&nbsp;</div><div class="line" id="file-gistfile1-java-LC8"><span class="c1">// Decrease the capacity of the buffer (the last 512 bytes are deleted.)</span></div><div class="line" id="file-gistfile1-java-LC9"><span class="n">buf</span><span class="o">.</span><span class="na">capacity</span><span class="o">(</span><span class="mi">512</span><span class="o">);</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3162371/raw/7669a4fab5c97a655929017292f0d3ea79ed515e/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3162371#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3162371">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>The only exception is the buffer which wraps a single buffer or a single byte array, created by <tt>wrappedBuffer()</tt>.
 &nbsp;You cannot increase its capacity because it invalidates the whole
 point of wrapping an existing buffer - saving memory copies. &nbsp;If 
you want to change the capacity after you wrap a buffer, you should just
 create a new buffer with enough capacity and copy the buffer you wanted
 to wrap.</p><h3 id="HNewinterface:CompositeByteBuf"><span>New interface: <tt>CompositeByteBuf</tt></span></h3><p>A new interface named <tt>CompositeByteBuf</tt>
 defines various advanced operations for composite buffer 
implementations. &nbsp;A user can save bulk memory copy operations using
 a composite buffer at the cost of relatively expensive random access. 
&nbsp;To crease a new composite buffer, use either <tt>ByteBuf.wrappedBuffer(...)</tt> like before or <tt>ByteBuf.compositeBuffer(...)</tt>.</p><h3 id="HPredictableNIObufferconversion"><span>Predictable NIO buffer conversion</span></h3><p>The contract of <tt>ChannelBuffer.toByteBuffer()</tt>
 and its variants were not deterministic enough in 3.x. &nbsp;It was 
impossible for a user to know if they will return a view buffer with 
shared data or a copied buffer with separate data. &nbsp;4.0 replaces <tt>toByteBuffer()</tt> with <tt>ByteBuf.hasNioBuffer()</tt> and <tt>ByteBuf.nioBuffer()</tt> which are similar to <tt>hasArray()</tt> and <tt>array()</tt>. &nbsp;If <tt>hasNioBuffer()</tt> returns <tt>false</tt>, a user can always get a copied buffer by calling <tt>copy().nioBuffer()</tt>.</p><h3 id="HLittleendiansupportchanges"><span>Little endian support changes</span></h3><p>Little endian support has been changed significantly. &nbsp;Previously, a user was supposed to specify a <tt>LittleEndianHeapChannelBufferFactory</tt> or wrap an existing buffer with the desired byte order to get a little endian buffer. &nbsp;4.0 adds a new method: <tt>ByteBuf.order(ByteOrder)</tt>. &nbsp;It returns a view of the callee with the desired byte order:</p><script src="New+and+Noteworthy_files/3037950.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3037950" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="kn">import</span> <span class="nn">io.netty.buffer.ByteBuf</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="kn">import</span> <span class="nn">io.netty.buffer.Unpooled</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC3"><span class="kn">import</span> <span class="nn">java.nio.ByteOrder</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC4">&nbsp;</div><div class="line" id="file-gistfile1-java-LC5"><span class="n">ByteBuf</span> <span class="n">buf</span> <span class="o">=</span> <span class="n">Unpooled</span><span class="o">.</span><span class="na">buffer</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC6"><span class="n">buf</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC7"><span class="c1">// Prints '00000001'</span></div><div class="line" id="file-gistfile1-java-LC8"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%08x%n"</span><span class="o">,</span> <span class="n">buf</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span> </div><div class="line" id="file-gistfile1-java-LC9">&nbsp;</div><div class="line" id="file-gistfile1-java-LC10"><span class="n">ByteBuf</span> <span class="n">leBuf</span> <span class="o">=</span> <span class="n">buf</span><span class="o">.</span><span class="na">order</span><span class="o">(</span><span class="n">ByteOrder</span><span class="o">.</span><span class="na">LITTLE_ENDIAN</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC11"><span class="c1">// Prints '01000000'</span></div><div class="line" id="file-gistfile1-java-LC12"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%08x%n"</span><span class="o">,</span> <span class="n">leBuf</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span></div><div class="line" id="file-gistfile1-java-LC13">&nbsp;</div><div class="line" id="file-gistfile1-java-LC14"><span class="k">assert</span> <span class="n">buf</span> <span class="o">!=</span> <span class="n">leBuf</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC15"><span class="k">assert</span> <span class="n">buf</span> <span class="o">==</span> <span class="n">buf</span><span class="o">.</span><span class="na">order</span><span class="o">(</span><span class="n">ByteOrder</span><span class="o">.</span><span class="na">BIG_ENDIAN</span><span class="o">);</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3037950/raw/e5a1292586ddd8e5e6a6dcd33ed7d8f5bc1ee945/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3037950#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3037950">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<h2 id="HPooledByteBuf"><span>Pooled ByteBuf</span></h2><p>As mentioned before Netty 4 introduced pooled ByteBuf instances. This can be useful for many reasons, to list a few:</p><ul><li>Limit GC pressure because of heavy allocation/deallocation when using unpooled ByteBufs</li><li>Better handling of direct (native) ByteBuf&nbsp;</li></ul><div><p>These Bytebufs can be obtained using the ByteBufAllocator.</p><script src="New+and+Noteworthy_files/4958901.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist4958901" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-bytebufallocator-L1" rel="file-bytebufallocator-L1">1</span>
          <span class="line-number" id="file-bytebufallocator-L2" rel="file-bytebufallocator-L2">2</span>
          <span class="line-number" id="file-bytebufallocator-L3" rel="file-bytebufallocator-L3">3</span>
          <span class="line-number" id="file-bytebufallocator-L4" rel="file-bytebufallocator-L4">4</span>
          <span class="line-number" id="file-bytebufallocator-L5" rel="file-bytebufallocator-L5">5</span>
          <span class="line-number" id="file-bytebufallocator-L6" rel="file-bytebufallocator-L6">6</span>
          <span class="line-number" id="file-bytebufallocator-L7" rel="file-bytebufallocator-L7">7</span>
          <span class="line-number" id="file-bytebufallocator-L8" rel="file-bytebufallocator-L8">8</span>
          <span class="line-number" id="file-bytebufallocator-L9" rel="file-bytebufallocator-L9">9</span>
          <span class="line-number" id="file-bytebufallocator-L10" rel="file-bytebufallocator-L10">10</span>
          <span class="line-number" id="file-bytebufallocator-L11" rel="file-bytebufallocator-L11">11</span>
          <span class="line-number" id="file-bytebufallocator-L12" rel="file-bytebufallocator-L12">12</span>
          <span class="line-number" id="file-bytebufallocator-L13" rel="file-bytebufallocator-L13">13</span>
          <span class="line-number" id="file-bytebufallocator-L14" rel="file-bytebufallocator-L14">14</span>
          <span class="line-number" id="file-bytebufallocator-L15" rel="file-bytebufallocator-L15">15</span>
          <span class="line-number" id="file-bytebufallocator-L16" rel="file-bytebufallocator-L16">16</span>
          <span class="line-number" id="file-bytebufallocator-L17" rel="file-bytebufallocator-L17">17</span>
          <span class="line-number" id="file-bytebufallocator-L18" rel="file-bytebufallocator-L18">18</span>
          <span class="line-number" id="file-bytebufallocator-L19" rel="file-bytebufallocator-L19">19</span>
          <span class="line-number" id="file-bytebufallocator-L20" rel="file-bytebufallocator-L20">20</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-bytebufallocator-LC1">public interface ByteBufAllocator {</div><div class="line" id="file-bytebufallocator-LC2">&nbsp;</div><div class="line" id="file-bytebufallocator-LC3">    ByteBuf buffer();</div><div class="line" id="file-bytebufallocator-LC4">    ByteBuf buffer(int initialCapacity);</div><div class="line" id="file-bytebufallocator-LC5">    ByteBuf buffer(int initialCapacity, int maxCapacity);</div><div class="line" id="file-bytebufallocator-LC6">    ByteBuf heapBuffer();</div><div class="line" id="file-bytebufallocator-LC7">    ByteBuf heapBuffer(int initialCapacity);</div><div class="line" id="file-bytebufallocator-LC8">    ByteBuf heapBuffer(int initialCapacity, int maxCapacity);</div><div class="line" id="file-bytebufallocator-LC9">    ByteBuf directBuffer();</div><div class="line" id="file-bytebufallocator-LC10">    ByteBuf directBuffer(int initialCapacity);</div><div class="line" id="file-bytebufallocator-LC11">    ByteBuf directBuffer(int initialCapacity, int maxCapacity);</div><div class="line" id="file-bytebufallocator-LC12">    ByteBuf ioBuffer();</div><div class="line" id="file-bytebufallocator-LC13">&nbsp;</div><div class="line" id="file-bytebufallocator-LC14">    CompositeByteBuf compositeBuffer();</div><div class="line" id="file-bytebufallocator-LC15">    CompositeByteBuf compositeBuffer(int maxNumComponents);</div><div class="line" id="file-bytebufallocator-LC16">    CompositeByteBuf compositeHeapBuffer();</div><div class="line" id="file-bytebufallocator-LC17">    CompositeByteBuf compositeHeapBuffer(int maxNumComponents);</div><div class="line" id="file-bytebufallocator-LC18">    CompositeByteBuf compositeDirectBuffer();</div><div class="line" id="file-bytebufallocator-LC19">    CompositeByteBuf compositeDirectBuffer(int maxNumComponents);</div><div class="line" id="file-bytebufallocator-LC20">}</div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/normanmaurer/4958901/raw/5ccea61d53e91ac80f6304afa39645e24da59ed3/ByteBufAllocator" style="float:right">view raw</a>
          <a href="https://gist.github.com/normanmaurer/4958901#file-bytebufallocator" style="float:right; margin-right:10px; color:#666;">ByteBufAllocator</a>
          <a href="https://gist.github.com/normanmaurer/4958901">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>Using the ByteBuffAllocator is quite easy, just access it via ChannelHandlerContext.alloc() or Channel.alloc() like show bellow.</p><script src="New+and+Noteworthy_files/4958917.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist4958917" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="n">Channel</span> <span class="n">channel</span> <span class="o">=</span> <span class="o">...;</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="n">ByteBuf</span> <span class="n">buf</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="na">alloc</span><span class="o">().</span><span class="na">buffer</span><span class="o">(</span><span class="mi">512</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC3"><span class="o">....</span></div><div class="line" id="file-gistfile1-java-LC4"><span class="n">channel</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC5">&nbsp;</div><div class="line" id="file-gistfile1-java-LC6"><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC7"><span class="n">ByteBuf</span> <span class="n">buf2</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">allo</span><span class="o">().</span><span class="na">buffer</span><span class="o">(</span><span class="mi">512</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC8"><span class="o">....</span></div><div class="line" id="file-gistfile1-java-LC9"><span class="n">channel</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf2</span><span class="o">)</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/normanmaurer/4958917/raw/31467d734697e98dbe933867703a1fda0ad25e1e/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/normanmaurer/4958917#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/normanmaurer/4958917">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>Once the ByteBuf was written to the remote peer it will automatically get released to the pool again.</p><p>If they <span style="font-family: Ubuntu, 'Liberation Sans', 'Droid Sans', Helvetica, sans-serif; font-size: 14px; font-style: normal; line-height: 19px; ">ByteBuf &nbsp;instances are&nbsp;</span>pooled
 or not depends on the implementation of the used ByteBufAllocator. By 
default Netty uses pooled ByteBufs via PooledByteBufAllocator, but you 
can adjust this by set UnpooledByteBufAllocator either on the 
ChannelConfig of the Channel or directly on the 
Bootstrap/ServerBootstrap to make it global for all Channels there.</p><p>&nbsp;</p></div><h2 id="HChannelAPIchanges"><span>Channel API changes</span></h2><p>In 4.0, many classes under the <tt>io.netty.channel</tt>
 package has gone through a major overhaul, and thus simple text 
search-and-replace will not make your 3.x application work with 4.0. 
&nbsp;This section will try to show the thought process behind such a 
big change, rather than being an exhaustive resource for all the 
changes.</p><h3 id="HRevampedChannelHandlerinterface"><span>Revamped <tt>ChannelHandler</tt> interface</span></h3><h4 id="HUpstream2192Inbound2CDownstream2192Outbound"><span>Upstream → Inbound, Downstream → Outbound</span></h4><p>The
 terms 'upstream' and 'downstream' was pretty confusing to beginners. 
&nbsp;4.0 use 'inbound' and 'outbound' wherever possible.</p><h4 id="HNewChannelHandlerhierarchy"><span>New <tt>ChannelHandler</tt> hierarchy</span></h4><p>In 3.x, <tt>ChannelHandler</tt> was just a tag interface, and <tt>ChannelUpstreamHandler</tt>, <tt>ChannelDownstreamHandler</tt>, and <tt>LifeCycleAwareChannelHandler</tt> defined the actual handler methods. &nbsp;In Netty 4, <tt>ChannelHandler</tt> merges <tt>LifeCycleAwareChannelHandler</tt> along with a couple more methods which is going to be useful to any handler implementations:</p><script src="New+and+Noteworthy_files/3038512.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3038512" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-channelhandler-java-L1" rel="file-channelhandler-java-L1">1</span>
          <span class="line-number" id="file-channelhandler-java-L2" rel="file-channelhandler-java-L2">2</span>
          <span class="line-number" id="file-channelhandler-java-L3" rel="file-channelhandler-java-L3">3</span>
          <span class="line-number" id="file-channelhandler-java-L4" rel="file-channelhandler-java-L4">4</span>
          <span class="line-number" id="file-channelhandler-java-L5" rel="file-channelhandler-java-L5">5</span>
          <span class="line-number" id="file-channelhandler-java-L6" rel="file-channelhandler-java-L6">6</span>
          <span class="line-number" id="file-channelhandler-java-L7" rel="file-channelhandler-java-L7">7</span>
          <span class="line-number" id="file-channelhandler-java-L8" rel="file-channelhandler-java-L8">8</span>
          <span class="line-number" id="file-channelhandler-java-L9" rel="file-channelhandler-java-L9">9</span>
          <span class="line-number" id="file-channelhandler-java-L10" rel="file-channelhandler-java-L10">10</span>
          <span class="line-number" id="file-channelhandler-java-L11" rel="file-channelhandler-java-L11">11</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-channelhandler-java-LC1"><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">ChannelHandler</span> <span class="o">{</span></div><div class="line" id="file-channelhandler-java-LC2">&nbsp;</div><div class="line" id="file-channelhandler-java-LC3">    <span class="kt">void</span> <span class="nf">beforeAdd</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-channelhandler-java-LC4">    <span class="kt">void</span> <span class="nf">afterAdd</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-channelhandler-java-LC5">    <span class="kt">void</span> <span class="nf">beforeRemove</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-channelhandler-java-LC6">    <span class="kt">void</span> <span class="nf">afterRemove</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-channelhandler-java-LC7">&nbsp;</div><div class="line" id="file-channelhandler-java-LC8">    <span class="kt">void</span> <span class="nf">exceptionCaught</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">Throwable</span> <span class="n">cause</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-channelhandler-java-LC9">    <span class="kt">void</span> <span class="nf">userEventTriggered</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">Object</span> <span class="n">evt</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-channelhandler-java-LC10">    <span class="o">...</span></div><div class="line" id="file-channelhandler-java-LC11"><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3038512/raw/c90c1942c456f92dc1ec48bb6eac9f0b2b990441/ChannelHandler.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3038512#file-channelhandler-java" style="float:right; margin-right:10px; color:#666;">ChannelHandler.java</a>
          <a href="https://gist.github.com/trustin/3038512">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>The following diagram depicts the new type hierarchy:</p><p><img src="New+and+Noteworthy_files/VOwn3O0m40FxJ945s82E1YeA9dY8KIAH3mfFWSJmj3mGMfzjdGyE5d6LmqR4.png" style="max-width:100%" alt="http://www.plantuml.com/plantuml/img/VOwn3O0m40FxJ945s82E1YeA9dY8KIAH3mfFWSJmj3mGMfzjdGyE5d6LmqR44Nap_Xw9Jsup9h0WppJ1DfwOiRJ4Ra5-Wq58KAGTZsbdL-JzYamI4fSRkwWBeuLiVLRLfyj7fieFjP_RbsGXroFjVG40"></p><h4 id="HChannelHandlerwithnoeventobject"><span><tt>ChannelHandler</tt> with no event object</span></h4><p>In 3.x, every I/O operation created a <tt>ChannelEvent</tt> object. &nbsp;For each read / write, it additionally created a new <tt>ChannelBuffer</tt>.
 &nbsp;It simplified the internals of Netty quite a lot because it 
delegates resource management and buffer pooling to JVM. &nbsp;However, 
it often was the root cause of the GC pressure and uncertainty which are
 sometimes observed in a Netty-based application under high load.</p><p>4.0
 removes event object creation completely by replacing the event objects
 with strongly typed method invocations. &nbsp;3.x has catch-all event 
handler methods such as <tt>handleUpstream()</tt> and <tt>handleDownstream()</tt>, but it's not the case anymore. &nbsp;Every event type has its own handler method now:</p><script src="New+and+Noteworthy_files/4958937.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist4958937" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
          <span class="line-number" id="file-gistfile1-java-L16" rel="file-gistfile1-java-L16">16</span>
          <span class="line-number" id="file-gistfile1-java-L17" rel="file-gistfile1-java-L17">17</span>
          <span class="line-number" id="file-gistfile1-java-L18" rel="file-gistfile1-java-L18">18</span>
          <span class="line-number" id="file-gistfile1-java-L19" rel="file-gistfile1-java-L19">19</span>
          <span class="line-number" id="file-gistfile1-java-L20" rel="file-gistfile1-java-L20">20</span>
          <span class="line-number" id="file-gistfile1-java-L21" rel="file-gistfile1-java-L21">21</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="c1">// Before:</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="kt">void</span> <span class="nf">handleUpstream</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelEvent</span> <span class="n">e</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC3"><span class="kt">void</span> <span class="nf">handleDownstream</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelEvent</span> <span class="n">e</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC4">&nbsp;</div><div class="line" id="file-gistfile1-java-LC5"><span class="c1">// After:</span></div><div class="line" id="file-gistfile1-java-LC6"><span class="kt">void</span> <span class="nf">channelRegistered</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC7"><span class="kt">void</span> <span class="nf">channelUnregistered</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC8"><span class="kt">void</span> <span class="nf">channelActive</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC9"><span class="kt">void</span> <span class="nf">channelInactive</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC10"><span class="kt">void</span> <span class="nf">inboundBufferUpdated</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC11">&nbsp;</div><div class="line" id="file-gistfile1-java-LC12"><span class="kt">void</span> <span class="nf">bind</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">SocketAddress</span> <span class="n">localAddress</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC13"><span class="kt">void</span> <span class="nf">connect</span><span class="o">(</span></div><div class="line" id="file-gistfile1-java-LC14">        <span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">SocketAddress</span> <span class="n">remoteAddress</span><span class="o">,</span></div><div class="line" id="file-gistfile1-java-LC15">        <span class="n">SocketAddress</span> <span class="n">localAddress</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC16"><span class="kt">void</span> <span class="nf">disconnect</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC17"><span class="kt">void</span> <span class="nf">close</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC18"><span class="kt">void</span> <span class="nf">deregister</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC19"><span class="kt">void</span> <span class="nf">flush</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC20"><span class="kt">void</span> <span class="nf">read</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC21"><span class="kt">void</span> <span class="nf">sendFile</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">FileRegion</span> <span class="n">region</span><span class="o">,</span> <span class="n">ChannelPromise</span> <span class="n">promise</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/normanmaurer/4958937/raw/7d603bee9434f17ed2d2efa58b6563848ad15389/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/normanmaurer/4958937#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/normanmaurer/4958937">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p><tt>ChannelHandlerContext</tt> also has been changed to reflect the changed mentioned above:</p><script src="New+and+Noteworthy_files/3038098.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3038098" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="c1">// Before:</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="n">ctx</span><span class="o">.</span><span class="na">sendUpstream</span><span class="o">(</span><span class="n">evt</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC3">&nbsp;</div><div class="line" id="file-gistfile1-java-LC4"><span class="c1">// After:</span></div><div class="line" id="file-gistfile1-java-LC5"><span class="n">ctx</span><span class="o">.</span><span class="na">fireInboundBufferUpdated</span><span class="o">();</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3038098/raw/0d808b3adc8ccc4ba7d3f2c0347c83b31201cf8a/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3038098#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3038098">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>All these changes mean a user cannot extend the non-existing <tt>ChannelEvent</tt> interface anymore. &nbsp;How do the user define his or her own event type such as <tt>IdleStateEvent</tt>? &nbsp;<tt>ChannelHandler</tt> in 4.0 has a handler method called <tt>userEventTriggered()</tt> which is dedicated to this specific user case.</p><h4 id="HSimplifiedchannelstatemodel"><span>Simplified channel state model</span></h4><p>When a new connected Channel is created in 3.x, at least three <tt>ChannelStateEvent</tt> is triggered: <tt>channelOpen</tt>, <tt>channelBound</tt>, and <tt>channelConnected</tt>. &nbsp;When a <tt>Channel</tt> is closed, it's <tt>channelDisconnected</tt>, <tt>channelUnbound</tt>, and <tt>channelClosed</tt>.</p><p><img src="New+and+Noteworthy_files/SoWkIImgAStDuOhMYbNGBSfCpoZHjLD8paZCoqlDyIz8pUD2OcCeSCelpKlX.png" style="max-width:100%" alt="http://www.plantuml.com/plantuml/img/SoWkIImgAStDuOhMYbNGBSfCpoZHjLD8paZCoqlDyIz8pUD2OcCeSCelpKlXGkPWA77E1vB99QbmPN011TsK_F8yX4gNpE9aTCN8OWgwEQbfI2Q7vYKXMm_begjopial1fhda9gN0lGc0000"></p><p>However,
 it's of dubious value to trigger that many events. &nbsp;It is more 
useful for a user to get notified when a Channel enters the state where 
it can perform reads and writes.</p><p><img src="New+and+Noteworthy_files/RP4z3i8m38NtdC8pKZW00m810n83GZ0XXf0O6f7QA751t9wAdpQqRFRB9p_x.png" style="max-width:100%" alt="http://www.plantuml.com/plantuml/img/RP4z3i8m38NtdC8pKZW00m810n83GZ0XXf0O6f7QA751t9wAdpQqRFRB9p_xPPB4HAdAeFQ30-ZepuNeCTZ2467OuDadmOXEzHGOmHHcRnKAa-28I11H_qMRKXWCmUA692lcwr3zmRjhJAtu6wgVhfwvdQr7aDXUKC1o_MIbNRIXTlEMEd95JdKGxVXEhTcIp8_Tj-yQ1awjMmRbVX-eH-c0f-o-7SLUqBdsYlezgqdS9t2OfTtXcz9KmgKHRqq8Zw6Q8Bdwjvy0"></p><p><tt>channelOpen</tt>, <tt>channelBound</tt>, and <tt>channelConnected</tt> are merged to <tt>channelActive</tt>. &nbsp;<tt>channelDisconnected</tt>, <tt>channelUnbound</tt>, and <tt>channelClosed</tt> are merged to <tt>channelInactive</tt>. &nbsp;Likewise, <tt>Channel.isBound()</tt> and <tt>isConnected()</tt> are merged to <tt>isActive()</tt>.</p><p>Note that <tt>channelRegistered</tt> and <tt>channelUnregistered</tt> are not equivalent to <tt>channelOpen</tt> and <tt>channelClosed</tt>.
 &nbsp;They are new states introduced to support dynamic registration, 
deregistration, and re-registration of a Channel, as illustrated below:</p><p><img src="New+and+Noteworthy_files/SoWkIImgAStDuOhMYbNGBSfCpoZHjLD8paZCoqlD2KfDpomkIIrAJOatvC8Y.png" style="max-width:100%" alt="http://www.plantuml.com/plantuml/img/SoWkIImgAStDuOhMYbNGBSfCpoZHjLD8paZCoqlD2KfDpomkIIrAJOatvC8YXg71CRaaiooL2uM7eIWqhmZP32k5b5I8G55YIMP-7XTsPRef-ULvM9rc13IYA5KNcnaegdHpKjEGdE6PbuZYMXWVNHsAEuou75BpKe3X1G00"></p><h4 id="HPer-handlerbuffer"><span>Per-handler buffer</span></h4><p>Unlike 3.x, which creates a new heap buffer on every read operation to trigger a upstream <tt>MessageEvent</tt>,
 4.0 does not create a new buffer every time. &nbsp;It reads data from a
 socket directly into the inbound buffer created by user's <tt>ChannelInboundHandler</tt> implementation.</p><p>Because the inbound buffer created by the <tt>ChannelInboundHandler</tt>
 is reused until the associated channel is closed, the GC overhead and 
the memory bandwidth consumption stays minimal. &nbsp;Also, a user has 
complete control over when the received data is discarded, the codec 
implementation becomes much simpler and efficient.</p><p>Similarly, it is not Netty that creates an outbound buffer. &nbsp;User's <tt>ChannelOutboundHandler</tt> does.</p><p>To make this efficient and terms of memory and GC the used buffer will be released automatically once either of these is true:</p><ul><li>The Channel is closed</li><li>The ChannelHandler was removed from the ChannelPipeline</li></ul><h5 id="HNotnecessarilyoneeventpermessage"><span>Not necessarily one event per message</span></h5><p>4.0 does not have <tt>messageReceived</tt> or <tt>writeRequested</tt> handler method anymore. &nbsp;They are replaced with <tt>inboundBufferUpdated</tt> and <tt>flush</tt>. &nbsp;A user enqueues one or more messages to an inbound (or outbound) buffer and triggers an <tt>inboundBufferUpdated</tt> (or <tt>flush</tt>) event.</p><script src="New+and+Noteworthy_files/3102590.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3102590" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
          <span class="line-number" id="file-gistfile1-java-L16" rel="file-gistfile1-java-L16">16</span>
          <span class="line-number" id="file-gistfile1-java-L17" rel="file-gistfile1-java-L17">17</span>
          <span class="line-number" id="file-gistfile1-java-L18" rel="file-gistfile1-java-L18">18</span>
          <span class="line-number" id="file-gistfile1-java-L19" rel="file-gistfile1-java-L19">19</span>
          <span class="line-number" id="file-gistfile1-java-L20" rel="file-gistfile1-java-L20">20</span>
          <span class="line-number" id="file-gistfile1-java-L21" rel="file-gistfile1-java-L21">21</span>
          <span class="line-number" id="file-gistfile1-java-L22" rel="file-gistfile1-java-L22">22</span>
          <span class="line-number" id="file-gistfile1-java-L23" rel="file-gistfile1-java-L23">23</span>
          <span class="line-number" id="file-gistfile1-java-L24" rel="file-gistfile1-java-L24">24</span>
          <span class="line-number" id="file-gistfile1-java-L25" rel="file-gistfile1-java-L25">25</span>
          <span class="line-number" id="file-gistfile1-java-L26" rel="file-gistfile1-java-L26">26</span>
          <span class="line-number" id="file-gistfile1-java-L27" rel="file-gistfile1-java-L27">27</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">inboundBufferUpdated</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC2">    <span class="n">Queue</span><span class="o">&lt;</span><span class="n">MyMessage</span><span class="o">&gt;</span> <span class="n">in</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">inboundMessageBuffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC3">    <span class="n">Queue</span><span class="o">&lt;</span><span class="n">MyNewMessage</span><span class="o">&gt;</span> <span class="n">out</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">nextInboundMessageBuffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC4">    <span class="k">for</span> <span class="o">(;;)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC5">        <span class="n">MyMessage</span> <span class="n">m</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC6">        <span class="k">if</span> <span class="o">(</span><span class="n">m</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC7">            <span class="k">break</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC8">        <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC9">        <span class="n">MyNewMessage</span> <span class="n">decoded</span> <span class="o">=</span> <span class="n">decode</span><span class="o">(</span><span class="n">m</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC10">        <span class="n">out</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">decoded</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC11">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC12">    <span class="n">ctx</span><span class="o">.</span><span class="na">fireInboundBufferUpdated</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC13"><span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC14">&nbsp;</div><div class="line" id="file-gistfile1-java-LC15"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">flush</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC16">    <span class="n">Queue</span><span class="o">&lt;</span><span class="n">MyNewMessage</span><span class="o">&gt;</span> <span class="n">in</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">outboundMessageBuffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC17">    <span class="n">Queue</span><span class="o">&lt;</span><span class="n">MyMessage</span><span class="o">&gt;</span> <span class="n">out</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">nextOutboundMessageBuffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC18">    <span class="k">for</span> <span class="o">(;;)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC19">        <span class="n">MyNewMessage</span> <span class="n">m</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC20">        <span class="k">if</span> <span class="o">(</span><span class="n">m</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC21">            <span class="k">break</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC22">        <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC23">        <span class="n">MyMessage</span> <span class="n">encoded</span> <span class="o">=</span> <span class="n">encode</span><span class="o">(</span><span class="n">m</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC24">        <span class="n">out</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">encoded</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC25">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC26">    <span class="n">ctx</span><span class="o">.</span><span class="na">flush</span><span class="o">(</span><span class="n">future</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC27"><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3102590/raw/2ad8e8bbdf84b3dd83984413b14d2d4c6acb0e03/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3102590#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3102590">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>Alternatively, a user can trigger such event for every single inbound
 (or outbound) message to emulate the old behavior although it might be 
less efficient than the new way.</p><h5 id="HMessagehandlervs.Bytehandler"><span>Message handler vs. Byte handler</span></h5><p>In 3.x, a <tt>MessageEvent</tt> holds an arbitrary object. &nbsp;It can be either a <tt>ChannelBuffer</tt> or a user-defined object and they are treated same:</p><script src="New+and+Noteworthy_files/3039071.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3039071" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="nd">@Override</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">messageReceived</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">MessageEvent</span> <span class="n">evt</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC3">    <span class="n">Object</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">evt</span><span class="o">.</span><span class="na">getMessage</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC4">    <span class="k">if</span> <span class="o">(</span><span class="n">msg</span> <span class="k">instanceof</span> <span class="n">ChannelBuffer</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC5">        <span class="n">ChannelBuffer</span> <span class="n">buf</span> <span class="o">=</span> <span class="o">(</span><span class="n">ChannelBuffer</span><span class="o">)</span> <span class="n">msg</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC6">        <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC7">    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC8">        <span class="n">MyMessage</span> <span class="n">myMsg</span> <span class="o">=</span> <span class="o">(</span><span class="n">MyMessage</span><span class="o">)</span> <span class="n">msg</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC9">        <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC10">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC11"><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3039071/raw/5110abd0f1a7b98a20c128e9e0497f894381913d/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3039071#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3039071">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>In 4.0, they are treated differently since a handler does not handle an individual message but handles multiple messages:</p><script src="New+and+Noteworthy_files/3039082.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3039082" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">inboundBufferUpdated</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC2">    <span class="k">if</span> <span class="o">(</span><span class="n">ctx</span><span class="o">.</span><span class="na">hasInboundByteBuffer</span><span class="o">())</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC3">        <span class="n">ByteBuf</span> <span class="n">buf</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">inboundByteBuffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC4">        <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC5">    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC6">        <span class="n">Queue</span><span class="o">&lt;</span><span class="n">MyMessage</span><span class="o">&gt;</span> <span class="n">buf</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">inboundMessageBuffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC7">        <span class="k">for</span> <span class="o">(;;)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC8">            <span class="n">MyMessage</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">buf</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC9">            <span class="k">if</span> <span class="o">(</span><span class="n">buf</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC10">                <span class="k">break</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC11">            <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC12">            <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC13">        <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC14">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC15"><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3039082/raw/646b265d52b5f6f87bd9f7f86e24eeeda5810797/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3039082#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3039082">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p>You might find it interesting that a <tt>ServerChannel</tt>'s handler is an inbound handler whose inbound buffer is <tt>Queue&lt;Channel&gt;</tt>.</p><h5 id="HHandleradapters"><span>Handler adapters</span></h5><p>Most
 users will find creating and managing its life cycle tedious, and 
therefore a user is supposed to extend the predefined adapter classes to
 make their life easier:</p><ul><li><tt>ChannelInboundMessageHandlerAdapter</tt></li><li><tt>ChannelInboundByteHandlerAdapter</tt></li><li><tt>ChannelOutboundMessageHandlerAdapter</tt></li><li><tt>ChannelOutboundByteHandlerAdapter</tt></li><li>ChannelDuplexHandler</li></ul><h3 id="HSensibleandlesserror-proneinboundtrafficsuspension"><span>Sensible and less error-prone inbound traffic suspension</span></h3><p>3.x had an unintuitive inbound traffic suspension mechanism provided by <tt>Channel.setReadable(boolean)</tt>. &nbsp;It introduced complicated interactions between <tt>ChannelHandler</tt>s and the handlers were easy to interfere with each other if implemented incorrectly.</p><p>In 4.0, each <tt>ChannelHandler</tt> is given with its own boolean flag called '<tt>readable</tt>' in its <tt>ChannelHandlerContext</tt>.
 &nbsp;The flag tells if the handler wants Netty to read inbound traffic
 or not. &nbsp;It works like a consensus system. &nbsp;If any of the 
boolean flags in the pipeline is set to false, Netty will suspend read 
operation. &nbsp;If all of the boolean flags in the pipeline are set to 
true, Netty will resume read operation.</p><h4 id="HSuspensionofacceptingincomingconnections"><span>Suspension of accepting incoming connections</span></h4><p>There
 was no way for a user to tell Netty 3.x to stop accepting incoming 
connections except for blocking the I/O thread or closing the server 
socket. &nbsp;4.0 respects the '<tt>readable</tt>' flag to suspend and resume accepting incoming connections.</p><h3 id="HHalf-closedsockets"><span>Half-closed sockets</span></h3><p>TCP
 and SCTP allow a user to shut down the outbound traffic of a socket 
without closing it completely. &nbsp;Such a socket is called 'a 
half-closed socket', and a user can make a half-closed socket by calling
 <tt>SocketChannel.shutdownOutput()</tt> method. If a remote peer shuts down the outbound traffic, <tt>SocketChannel.read(..)</tt> will return <tt>-1</tt>, which was seemingly indistinguishable from a closed connection.</p><p>3.x did not have <tt>shutdownOutput()</tt> operation. &nbsp;Also, it always closed the connection when <tt>SocketChannel.read(..)</tt> returns <tt>-1</tt>.</p><p>To support a half-closed socket, 4.0 adds <tt>SocketChannel.shutdownOutput()</tt> method, and a user can set the '<tt>ALLOW_HALF_CLOSURE</tt>' <tt>ChannelOption</tt> to prevent Netty from closing the connection automatically even if <tt>SocketChannel.read(..)</tt> returns <tt>-1</tt>.</p><h3 id="HFlexibleI2FOthreadallocation"><span>Flexible I/O thread allocation</span></h3><p>In 3.x, a <tt>Channel</tt> is created by a <tt>ChannelFactory</tt> and the newly created <tt>Channel</tt> is automatically registered to a hidden I/O thread. &nbsp;4.0 replaces <tt>ChannelFactory</tt> with a new interface called <tt>EventLoopGroup</tt> which consists of one or more <tt>EventLoop</tt>s. &nbsp;Also, a new <tt>Channel</tt> is not registered to the <tt>EventLoopGroup</tt> automatically but a user has to call <tt>EventLoopGroup.register()</tt> explicitly.&nbsp;&nbsp;</p><p>Thanks to this change (i.e. separation of <tt>ChannelFactory</tt> and I/O threads), a user can register different <tt>Channel</tt> implementations to the same <tt>EventLoopGroup</tt>, or same Channel implementations to different <tt>EventLoopGroup</tt>s.
 &nbsp;For example, &nbsp;you can run a NIO server socket, NIO client 
sockets, NIO UDP sockets, and in-VM local channels in the same I/O 
thread. &nbsp;It should be very useful when writing a proxy server which
 requires minimal latency.</p><h3 id="HAbilitytocreateaChannelfromanexistingJDKsocket"><span>Ability to create a <tt>Channel</tt> from an existing JDK socket</span></h3><p>3.x provided no way to create a new <tt>Channel</tt> from an existing JDK socket such as <tt>java.nio.channels.SocketChannel</tt>. &nbsp;You can with 4.0.</p><h3 id="HDeregistrationandre-registraionofaChannelfromB7toanI2FOthread"><span>Deregistration and re-registraion of a <tt>Channel</tt> from·to an I/O thread</span></h3><p>Once a new <tt>Channel</tt>
 is created in 3.x, it is completely tied to a single I/O thread until 
its underlying socket is closed. &nbsp;In 4.0, a user can deregister a <tt>Channel</tt>
 from its I/O thread to gain the full control of its underlying JDK 
socket. &nbsp;For example, you can take advantage of high-level 
non-blocking I/O Netty provides to deal with complex protocols, and then
 later deregister the <tt>Channel</tt> and switch to blocking mode to 
transfer a file at possible maximum throughput. &nbsp;Of course, it is 
possible to register the deregistered <tt>Channel</tt> back again.</p><script src="New+and+Noteworthy_files/3039522.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3039522" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
          <span class="line-number" id="file-gistfile1-java-L16" rel="file-gistfile1-java-L16">16</span>
          <span class="line-number" id="file-gistfile1-java-L17" rel="file-gistfile1-java-L17">17</span>
          <span class="line-number" id="file-gistfile1-java-L18" rel="file-gistfile1-java-L18">18</span>
          <span class="line-number" id="file-gistfile1-java-L19" rel="file-gistfile1-java-L19">19</span>
          <span class="line-number" id="file-gistfile1-java-L20" rel="file-gistfile1-java-L20">20</span>
          <span class="line-number" id="file-gistfile1-java-L21" rel="file-gistfile1-java-L21">21</span>
          <span class="line-number" id="file-gistfile1-java-L22" rel="file-gistfile1-java-L22">22</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="n">java</span><span class="o">.</span><span class="na">nio</span><span class="o">.</span><span class="na">channels</span><span class="o">.</span><span class="na">FileChannel</span> <span class="n">myFile</span> <span class="o">=</span> <span class="o">...;</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="n">java</span><span class="o">.</span><span class="na">nio</span><span class="o">.</span><span class="na">channels</span><span class="o">.</span><span class="na">SocketChannel</span> <span class="n">mySocket</span> <span class="o">=</span> <span class="n">java</span><span class="o">.</span><span class="na">nio</span><span class="o">.</span><span class="na">channels</span><span class="o">.</span><span class="na">SocketChannel</span><span class="o">.</span><span class="na">open</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC3">&nbsp;</div><div class="line" id="file-gistfile1-java-LC4"><span class="c1">// Perform some blocking operation here.</span></div><div class="line" id="file-gistfile1-java-LC5"><span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC6">&nbsp;</div><div class="line" id="file-gistfile1-java-LC7"><span class="c1">// Netty takes over.</span></div><div class="line" id="file-gistfile1-java-LC8"><span class="n">SocketChannel</span> <span class="n">ch</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NioSocketChannel</span><span class="o">(</span><span class="n">mySocket</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC9"><span class="n">EventLoopGroup</span> <span class="n">group</span> <span class="o">=</span> <span class="o">...;</span></div><div class="line" id="file-gistfile1-java-LC10"><span class="n">group</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">ch</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC11"><span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC12">&nbsp;</div><div class="line" id="file-gistfile1-java-LC13"><span class="c1">// Deregister from Netty.</span></div><div class="line" id="file-gistfile1-java-LC14"><span class="n">ch</span><span class="o">.</span><span class="na">deregister</span><span class="o">().</span><span class="na">sync</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC15">&nbsp;</div><div class="line" id="file-gistfile1-java-LC16"><span class="c1">// Perform some blocking operation here.</span></div><div class="line" id="file-gistfile1-java-LC17"><span class="n">mySocket</span><span class="o">.</span><span class="na">configureBlocking</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC18"><span class="n">myFile</span><span class="o">.</span><span class="na">transferFrom</span><span class="o">(</span><span class="n">mySocket</span><span class="o">,</span> <span class="o">...);</span></div><div class="line" id="file-gistfile1-java-LC19">&nbsp;</div><div class="line" id="file-gistfile1-java-LC20"><span class="c1">// Register back again to another event loop group.</span></div><div class="line" id="file-gistfile1-java-LC21"><span class="n">EventLoopGroup</span> <span class="n">anotherGroup</span> <span class="o">=</span> <span class="o">...;</span></div><div class="line" id="file-gistfile1-java-LC22"><span class="n">anotherGroup</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">ch</span><span class="o">);</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3039522/raw/2c3d4f32a45d81e4540d8b6e3c483fb6c390fbbe/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3039522#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3039522">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<h3 id="HSchedulinganarbitrarytasktoberunbyanI2FOthread"><span>Scheduling an arbitrary task to be run by an I/O thread</span></h3><p>When a <tt>Channel</tt> is registered to an <tt>EventLoopGroup</tt>, the <tt>Channel</tt> is actually registered to one of the <tt>EventLoop</tt>s which is managed by the EventLoopGroup. &nbsp;<tt>EventLoop</tt> implements <tt>java.util.concurrent.ScheduledExecutorService</tt>. &nbsp;It means a user can execute or schedule an arbitrary <tt>Runnable</tt> or <tt>Callable</tt>
 in an I/O thread where the user's channel belongs to. &nbsp;Along with 
the new well-defined thread model, which will be explained later, it 
became extremely easier to write a thread-safe handler.</p><script src="New+and+Noteworthy_files/3039492.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3039492" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
          <span class="line-number" id="file-gistfile1-java-L16" rel="file-gistfile1-java-L16">16</span>
          <span class="line-number" id="file-gistfile1-java-L17" rel="file-gistfile1-java-L17">17</span>
          <span class="line-number" id="file-gistfile1-java-L18" rel="file-gistfile1-java-L18">18</span>
          <span class="line-number" id="file-gistfile1-java-L19" rel="file-gistfile1-java-L19">19</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyHandler</span> <span class="kd">extends</span> <span class="n">ChannelOutboundMessageHandlerAdapter</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC2">    <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC3">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">flush</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">ChannelFuture</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC4">        <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC5">        <span class="n">ctx</span><span class="o">.</span><span class="na">flush</span><span class="o">(</span><span class="n">f</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC6">&nbsp;</div><div class="line" id="file-gistfile1-java-LC7">        <span class="c1">// Schedule a write timeout.</span></div><div class="line" id="file-gistfile1-java-LC8">        <span class="n">ctx</span><span class="o">.</span><span class="na">executor</span><span class="o">().</span><span class="na">schedule</span><span class="o">(</span><span class="k">new</span> <span class="n">MyWriteTimeoutTask</span><span class="o">(),</span> <span class="mi">30</span><span class="o">,</span> <span class="n">TimeUnit</span><span class="o">.</span><span class="na">SECONDS</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC9">        <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC10">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC11"><span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC12">&nbsp;</div><div class="line" id="file-gistfile1-java-LC13"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC14">    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC15">        <span class="c1">// Run an arbitrary task from an I/O thread.</span></div><div class="line" id="file-gistfile1-java-LC16">        <span class="n">Channel</span> <span class="n">ch</span> <span class="o">=</span> <span class="o">...;</span></div><div class="line" id="file-gistfile1-java-LC17">        <span class="n">ch</span><span class="o">.</span><span class="na">executor</span><span class="o">().</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span> <span class="o">...</span> <span class="o">});</span></div><div class="line" id="file-gistfile1-java-LC18">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC19"><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3039492/raw/417e4b3adf65e03745a43050e17aff805740da33/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3039492#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3039492">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<h3 id="HSimplifiedshutdown"><span>Simplified shutdown</span></h3><p>There's no more <tt>releaseExternalResources()</tt>. &nbsp;You can close all open channels immediately and make all I/O threads stop themselves by calling <tt>EventLoopGroup.shutdown()</tt>, just like you shut down your thread pool with <tt>java.util.concurrent.ExecutorService.shutdown()</tt>.</p><h3 id="HType-safeChannelOptions"><span>Type-safe <tt>ChannelOption</tt>s</span></h3><p>There are two ways to configure the socket parameters of a <tt>Channel</tt> in Netty. &nbsp;One is to call the setters of a <tt>ChannelConfig</tt> explicitly, such as <tt>SocketChannelConfig.setTcpNoDelay(true)</tt>. &nbsp;It is the most type-safe way. &nbsp;The other is to call <tt>ChannelConfig.setOption()</tt>
 method. &nbsp;Sometimes you have to determine what socket options to 
configure in runtime, and this method is ideal for such cases. 
&nbsp;However, it is error-prone in 3.x because a user has to specify 
the option as a pair of a string and an object. &nbsp;If a user calls 
with the wrong option name or value, he or she will encounter a <tt>ClassCastException</tt> or the specified option might even be ignored silently.</p><p>4.0 introduces a new type called <tt>ChannelOption</tt>, which provides type-safe access to socket options.</p><script src="New+and+Noteworthy_files/3045309.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3045309" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="n">ChannelConfig</span> <span class="n">cfg</span> <span class="o">=</span> <span class="o">...;</span></div><div class="line" id="file-gistfile1-java-LC2">&nbsp;</div><div class="line" id="file-gistfile1-java-LC3"><span class="c1">// Before:</span></div><div class="line" id="file-gistfile1-java-LC4"><span class="n">cfg</span><span class="o">.</span><span class="na">setOption</span><span class="o">(</span><span class="s">"tcpNoDelay"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC5"><span class="n">cfg</span><span class="o">.</span><span class="na">setOption</span><span class="o">(</span><span class="s">"tcpNoDelay"</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>  <span class="c1">// Runtime ClassCastException</span></div><div class="line" id="file-gistfile1-java-LC6"><span class="n">cfg</span><span class="o">.</span><span class="na">setOption</span><span class="o">(</span><span class="s">"tcpNoDelays"</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span> <span class="c1">// Typo in the option name - ignored silently</span></div><div class="line" id="file-gistfile1-java-LC7">&nbsp;</div><div class="line" id="file-gistfile1-java-LC8"><span class="c1">// After:</span></div><div class="line" id="file-gistfile1-java-LC9"><span class="n">cfg</span><span class="o">.</span><span class="na">setOption</span><span class="o">(</span><span class="n">ChannelOption</span><span class="o">.</span><span class="na">TCP_NODELAY</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC10"><span class="n">cfg</span><span class="o">.</span><span class="na">setOption</span><span class="o">(</span><span class="n">ChannelOption</span><span class="o">.</span><span class="na">TCP_NODELAY</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">// Compile error</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3045309/raw/836c009e3fb0d1e843e516eddd133e93a00eef97/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3045309#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3045309">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<div class="wikimodel-emptyline"></div><h3 id="HReadmodes" style="font-style: normal; "><span><span style="line-height: 19px;">Read modes</span></span></h3><p>In
 the past it was almost impossible to limit reads of new data from the 
Channel in a sane way as Netty just was accepting data as soon as it was
 ready. You was able to use Channel.setReadable(..) but it had its 
limitations. In Netty 4 we now provide different read modes which you 
can change on the fly. Default is to read data as soon as it is ready to
 read, the other is to need to explicit call Channel.read() or 
ChannelPipeline.read() when you want to read the next chunk of data once
 it is ready. This can help you to minimize the needed memory even more 
and also allows you for better traffic control. One use case of this 
feature is for a proxy where you may want to stop reading till you was 
able to write all the data to the "real" server.</p><div class="wikimodel-emptyline"></div><p>You can set the read mode either on the ChannelConfig of the Channel directly or on the BootStrap/ServerBootstrap global.</p><h3 id="HAttributeMap"><span><tt>AttributeMap</tt></span></h3><p>In response to user demand, you can attach any object to <tt>Channel</tt> and <tt>ChannelHandlerContext</tt>. &nbsp;A new interface called <tt>AttributeMap</tt>, which <tt>Channel</tt> and <tt>ChannelHandlerContext</tt> extend, has been added. &nbsp;Instead, <tt>ChannelLocal</tt> and <tt>Channel.attachment</tt> are removed. &nbsp;The attributes are garbage-collected when their associated <tt>Channel</tt> is garbage-collected.</p><script src="New+and+Noteworthy_files/3057755.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3057755" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
          <span class="line-number" id="file-gistfile1-java-L16" rel="file-gistfile1-java-L16">16</span>
          <span class="line-number" id="file-gistfile1-java-L17" rel="file-gistfile1-java-L17">17</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyHandler</span> <span class="kd">extends</span> <span class="n">ChannelInboundMessageHandlerAdapter</span><span class="o">&lt;</span><span class="n">MyMessage</span><span class="o">&gt;</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC2">&nbsp;</div><div class="line" id="file-gistfile1-java-LC3">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">AttributeKey</span><span class="o">&lt;</span><span class="n">MyState</span><span class="o">&gt;</span> <span class="n">STATE</span> <span class="o">=</span></div><div class="line" id="file-gistfile1-java-LC4">            <span class="k">new</span> <span class="n">AttributeKey</span><span class="o">&lt;</span><span class="n">MyState</span><span class="o">&gt;(</span><span class="s">"MyHandler.state"</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC5">&nbsp;</div><div class="line" id="file-gistfile1-java-LC6">    <span class="nd">@Override</span></div><div class="line" id="file-gistfile1-java-LC7">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">channelRegistered</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC8">        <span class="n">ctx</span><span class="o">.</span><span class="na">attr</span><span class="o">(</span><span class="n">STATE</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="k">new</span> <span class="n">MyState</span><span class="o">());</span></div><div class="line" id="file-gistfile1-java-LC9">        <span class="n">ctx</span><span class="o">.</span><span class="na">fireChannelRegistered</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC10">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC11">&nbsp;</div><div class="line" id="file-gistfile1-java-LC12">    <span class="nd">@Override</span></div><div class="line" id="file-gistfile1-java-LC13">    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">messageReceived</span><span class="o">(</span><span class="n">ChannelHandlerContext</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">MyMessage</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC14">        <span class="n">MyState</span> <span class="n">state</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">attr</span><span class="o">(</span><span class="n">STATE</span><span class="o">).</span><span class="na">get</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC15">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC16">    <span class="o">...</span></div><div class="line" id="file-gistfile1-java-LC17"><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3057755/raw/97c28bc578e1f147c8cccc8386125795c75b4a5a/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3057755#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3057755">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<h3 id="HNewbootstrapAPI"><span>New bootstrap API</span></h3><p>The 
bootstrap API has been rewritten from scratch although its purpose stays
 same; it performs the typical steps required to make a server or a 
client up and running, often found in boilerplate code.</p><p>The new bootstrap also employs <span class="wikiexternallink"><a href="http://en.wikipedia.org/wiki/Fluent_interface">fluent interface</a></span>.</p><script src="New+and+Noteworthy_files/3044400.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3044400" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
          <span class="line-number" id="file-gistfile1-java-L16" rel="file-gistfile1-java-L16">16</span>
          <span class="line-number" id="file-gistfile1-java-L17" rel="file-gistfile1-java-L17">17</span>
          <span class="line-number" id="file-gistfile1-java-L18" rel="file-gistfile1-java-L18">18</span>
          <span class="line-number" id="file-gistfile1-java-L19" rel="file-gistfile1-java-L19">19</span>
          <span class="line-number" id="file-gistfile1-java-L20" rel="file-gistfile1-java-L20">20</span>
          <span class="line-number" id="file-gistfile1-java-L21" rel="file-gistfile1-java-L21">21</span>
          <span class="line-number" id="file-gistfile1-java-L22" rel="file-gistfile1-java-L22">22</span>
          <span class="line-number" id="file-gistfile1-java-L23" rel="file-gistfile1-java-L23">23</span>
          <span class="line-number" id="file-gistfile1-java-L24" rel="file-gistfile1-java-L24">24</span>
          <span class="line-number" id="file-gistfile1-java-L25" rel="file-gistfile1-java-L25">25</span>
          <span class="line-number" id="file-gistfile1-java-L26" rel="file-gistfile1-java-L26">26</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC2">    <span class="c1">// Configure the server.</span></div><div class="line" id="file-gistfile1-java-LC3">    <span class="n">ServerBootstrap</span> <span class="n">b</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerBootstrap</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC4">    <span class="k">try</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC5">        <span class="n">b</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="k">new</span> <span class="n">NioEventLoopGroup</span><span class="o">(),</span> <span class="k">new</span> <span class="n">NioEventLoopGroup</span><span class="o">())</span></div><div class="line" id="file-gistfile1-java-LC6">         <span class="o">.</span><span class="na">channel</span><span class="o">(</span><span class="k">new</span> <span class="n">NioServerSocketChannel</span><span class="o">())</span></div><div class="line" id="file-gistfile1-java-LC7">         <span class="o">.</span><span class="na">option</span><span class="o">(</span><span class="n">ChannelOption</span><span class="o">.</span><span class="na">SO_BACKLOG</span><span class="o">,</span> <span class="mi">100</span><span class="o">)</span></div><div class="line" id="file-gistfile1-java-LC8">         <span class="o">.</span><span class="na">localAddress</span><span class="o">(</span><span class="mi">8080</span><span class="o">)</span></div><div class="line" id="file-gistfile1-java-LC9">         <span class="o">.</span><span class="na">childOption</span><span class="o">(</span><span class="n">ChannelOption</span><span class="o">.</span><span class="na">TCP_NODELAY</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span></div><div class="line" id="file-gistfile1-java-LC10">         <span class="o">.</span><span class="na">childHandler</span><span class="o">(</span><span class="k">new</span> <span class="n">ChannelInitializer</span><span class="o">&lt;</span><span class="n">SocketChannel</span><span class="o">&gt;()</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC11">             <span class="nd">@Override</span></div><div class="line" id="file-gistfile1-java-LC12">             <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initChannel</span><span class="o">(</span><span class="n">SocketChannel</span> <span class="n">ch</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC13">                 <span class="n">ch</span><span class="o">.</span><span class="na">pipeline</span><span class="o">().</span><span class="na">addLast</span><span class="o">(</span><span class="n">handler1</span><span class="o">,</span> <span class="n">handler2</span><span class="o">,</span> <span class="o">...);</span></div><div class="line" id="file-gistfile1-java-LC14">             <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC15">         <span class="o">});</span></div><div class="line" id="file-gistfile1-java-LC16">&nbsp;</div><div class="line" id="file-gistfile1-java-LC17">        <span class="c1">// Start the server.</span></div><div class="line" id="file-gistfile1-java-LC18">        <span class="n">ChannelFuture</span> <span class="n">f</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="na">bind</span><span class="o">().</span><span class="na">sync</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC19">&nbsp;</div><div class="line" id="file-gistfile1-java-LC20">        <span class="c1">// Wait until the server socket is closed.</span></div><div class="line" id="file-gistfile1-java-LC21">        <span class="n">f</span><span class="o">.</span><span class="na">channel</span><span class="o">().</span><span class="na">closeFuture</span><span class="o">().</span><span class="na">sync</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC22">    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC23">        <span class="c1">// Shut down all event loops to terminate all threads.</span></div><div class="line" id="file-gistfile1-java-LC24">        <span class="n">b</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC25">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC26"><span class="o">}</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3044400/raw/b1fd008c0d70e63581eecae5db3c4e8ca64b1990/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3044400#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3044400">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<h4 id="HChannelPipelineFactory2192ChannelInitializer"><span><tt>ChannelPipelineFactory</tt> → <tt>ChannelInitializer</tt></span></h4><p>As you noticed in the example above, there is no <tt>ChannelPipelineFactory</tt> anymore. &nbsp;It has been replaced with <tt>ChannelInitializer</tt>, which gives more control over <tt>Channel</tt> and <tt>ChannelPipeline</tt> configuration.</p><p>Please note that you don't create a new <tt>ChannelPipeline</tt>
 by yourself. &nbsp;After observing many use cases reported so far, the 
Netty project team concluded that it has no benefit for a user to create
 his or her own pipeline implementation or to extend the default 
implementation. &nbsp;Therefore, <tt>ChannelPipeline</tt> is not created by a user anymore. &nbsp;<tt>ChannelPipeline</tt> is automatically created by a <tt>Channel</tt>.</p><h3 id="HChannelFuturesplittoChannelFutureandChannelPromise"><span><tt>ChannelFuture split to ChannelFuture and ChannelPromise</tt></span></h3><p><tt>ChannelFuture
 was split into ChannelFuture and ChannelPromise to kind of mimic the 
API of the Scala Future API. This not only make the contract of consumer
 and producer explicit, but also make it more safe to use the returned 
ChannelFuture in a chain (like filtering) as no part of the Chain can 
change the state of the ChannelFuture and so may give unexpected 
results.</tt></p><p>What does this mean for the user ? Every operation 
that expect to make changes will accept a ChannelPromise as parameter. 
All returned will always be ChannelFutures.</p><h2 id="HWell-definedthreadmodel"><span>Well-defined thread model</span></h2><p>There
 is no well-defined thread model in 3.x although there was an attempt to
 fix its inconsistency in 3.5. &nbsp;4.0 defines a strict thread model 
that helps a user write a <tt>ChannelHandler</tt> without worrying too much about thread safety.</p><ul><li>Netty will never call a <tt>ChannelHandler</tt>'s methods concurrently, unless the <tt>ChannelHandler</tt> is annotated with <tt>@Shareable</tt>. This is regardless of the type of handler methods - inbound, outbound, or life cycle event handler methods.<ul><li>A user does not need to synchronize either inbound or outbound event handler methods anymore.</li><li>4.0 disallows adding a <tt>ChannelHandler</tt> more than once unless it's annotated with <tt>@Sharable</tt>.</li></ul></li><li>There is always <span class="wikiexternallink"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility">happens-before</a></span> relationship between each <tt>ChannelHandler</tt> method invocations made by Netty.<ul><li>A user does not need to define a volatile field to keep the state of a handler.</li></ul></li><li>A user can specify an <tt>EventExecutor</tt> when he or she adds a handler to a <tt>ChannelPipeline</tt>.<ul><li>If specified, the handler methods of the <tt>ChannelHandler</tt> are always invoked by the specified <tt>EventExecutor</tt>.</li><li>If unspecified, the handler methods are always invoked by the <tt>EventLoop</tt> that its associated <tt>Channel</tt> is registered to.</li></ul></li><li><tt>EventExecutor</tt> and <tt>EventLoop</tt> assigned to a handler or a channel are always single-threaded.<ul><li>The handler methods will always be invoked by the same thread.</li><li>If multithreaded <tt>EventExecutor</tt> or <tt>EventLoop</tt> is specified, one of the threads will be chosen first and then the chosen thread will be used until deregistration.</li><li>If two handlers in the same pipeline are assigned with different <tt>EventExecutor</tt>s,
 they are invoked simultaneously. &nbsp;A user has to pay attention to 
thread safety if more than one handler access shared data even if the 
shared data is accessed only by the handlers in the same pipeline.</li></ul></li><li>The <tt>ChannelFutureListener</tt>s added to <tt>ChannelFuture</tt> are always invoked by the <tt>EventLoop</tt> thread assigned to the future's associated <tt>Channel</tt>.</li></ul><h3 id="HNomoreExecutionHandler-it27sinthecore."><span>No more <tt>ExecutionHandler</tt> - it's in the core.</span></h3><p>You can specify an <tt>EventExecutor</tt> when you add a <tt>ChannelHandler</tt> to a <tt>ChannelPipeline</tt> to tell the pipeline to always invoke the handler methods of the added <tt>ChannelHandler</tt> via the specified <tt>EventExecutor</tt>.</p><script src="New+and+Noteworthy_files/3057966.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3057966" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1"><span class="n">Channel</span> <span class="n">ch</span> <span class="o">=</span> <span class="o">...;</span></div><div class="line" id="file-gistfile1-java-LC2"><span class="n">ChannelPipeline</span> <span class="n">p</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="na">pipeline</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC3"><span class="n">EventExecutor</span> <span class="n">e1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultEventExecutor</span><span class="o">(</span><span class="mi">16</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC4"><span class="n">EventExecutor</span> <span class="n">e2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DefaultEventExecutor</span><span class="o">(</span><span class="mi">8</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC5">&nbsp;</div><div class="line" id="file-gistfile1-java-LC6"><span class="n">p</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="k">new</span> <span class="n">MyProtocolCodec</span><span class="o">());</span></div><div class="line" id="file-gistfile1-java-LC7"><span class="n">p</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="n">e1</span><span class="o">,</span> <span class="k">new</span> <span class="n">MyDatabaseAccessingHandler</span><span class="o">());</span></div><div class="line" id="file-gistfile1-java-LC8"><span class="n">p</span><span class="o">.</span><span class="na">addLast</span><span class="o">(</span><span class="n">e2</span><span class="o">,</span> <span class="k">new</span> <span class="n">MyHardDiskAccessingHandler</span><span class="o">());</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3057966/raw/fbe68553fa47a0efa6272dff3b434560ed887de7/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3057966#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3057966">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>
<p><tt>EventExecutor</tt> is a supertype of <tt>EventLoop</tt>, and it also extends <tt>ScheduledExecutorService</tt>.</p><p><img src="New+and+Noteworthy_files/SoWkIImgAStDuSh8J4bLo4tDJKejAePmqZ9JSrAAkRWoyqfIYz8IarCLWfCp.png" style="max-width:100%" alt="http://www.plantuml.com/plantuml/img/SoWkIImgAStDuSh8J4bLo4tDJKejAePmqZ9JSrAAkRWoyqfIYz8IarCLWfCpKbDASr9JN2jIaqjByek2KulACe4IDZMw2gvbgNabC0aaJIZY29K--Va5wAh0OWwfUIb01m40"></p><h2 id="HCodecframeworkchanges"><span>Codec framework changes</span></h2><p>There
 were substantial internal changes in codec framework because 4.0 
requires a handler to create and manage its buffer (see Per-handler 
buffer section in this document.) &nbsp;However, the changes from a 
user's perspective are not very big.</p><ul><li>Core codec classes are moved to the <tt>io.netty.handler.codec</tt> package.</li><li><tt>FrameDecoder</tt> has been renamed to <tt>ByteToMessageDecoder</tt>.</li><li><tt>OneToOneEncoder</tt> and <tt>OneToOneDecoder</tt> were replaced with <tt>MessageToMessageEncoder</tt> and <tt>MessageDecoder</tt>.</li><li>The
 method signatures of decode(), decodeLast(), encode() were changed 
slightly to support generics and to remove redundant parameters.</li></ul><h3 id="HCodecembedder2192EmbeddedChannel"><span>Codec embedder → <tt>EmbeddedChannel</tt></span></h3><p>Codec embedder has been replaced by <tt>io.netty.channel.embedded.EmbeddedChannel</tt>. <tt>EmbeddedChannel</tt> allows a user unit-test any kind of pipeline including a codec.</p><h3 id="HHTTPcodec"><span><tt>HTTP codec</tt></span></h3><p><span style="font-family: Ubuntu Mono Liberation Mono Droid Mono Consolas Monaco monospace; line-height: 14px">We
 did rewrite most of the http codec to make it easier to use as it did 
feel a bit clumpy the old way. Now a full HTTP Message &nbsp;is 
represent by these:</span></p><div class="box code">1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #666666; ">*</span> HttpRequest <span style="color: #666666; ">/</span> HttpResponse<br>0 <span style="color: #666666; ">-</span> n &nbsp;&nbsp;<span style="color: #666666; ">*</span> HttpContent<br>1 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #666666; ">*</span> LastHttpContent</div><p>If
 you don't want to deal with these fragments it is still possible to put
 the HttpObjectAggregator in the ChannelPipeline which will produce 
either a FullHttpRequest or FullHttpResponse depending on the direction.</p><h2 id="HChangesintransportimplementations"><span>Changes in transport implementations</span></h2><p>The following transports were newly added:</p><ul><li>AIO socket transport which uses the NIO.2 <tt>AsynchronousSocketChannel</tt></li><li>OIO SCTP transport</li><li>UDT transport</li></ul><div><p><span style="line-height: 19px;">Be
 aware that only the core transports are in the same jar. For every 
optional or not core transport an extra jar is provided to only provide 
you with what you really need.</span></p></div><h2 id="HCasestudy:portingtheFactorialexample"><span>Case study: porting the Factorial example</span></h2><p>This
 section shows rough steps to port the Factorial example from 3.x to 
4.0. &nbsp;The Factorial example has been ported to 4.0 already in the <tt>io.netty.example.factorial</tt> package. &nbsp;Please browse the source code of the example to find every bits changed.</p><h3 id="HPortingtheserver"><span>Porting the server</span></h3><ol><li>Rewrite <tt>FactorialServer.run()</tt> method to use the new bootstrap API.<ol><li>No <tt>ChannelFactory</tt> anymore. &nbsp;Instantiate <tt>NioEventLoop</tt> (one for accepting incoming connections and the other for handling the accepted connections) and <tt>NioServerSocketChannel</tt> by yourself.</li></ol></li><li>Rename <tt>FactorialServerPipelineFactory</tt> to <tt>FactorialServerInitializer</tt>.<ol><li>Make it extends <tt>ChannelInitializer&lt;Channel&gt;</tt>.</li><li>Instead of creating a new <tt>ChannelPipeline</tt>, get it via <tt>Channel.pipeline()</tt>.</li></ol></li><li>Make <tt>FactorialServerHandler</tt> extends <tt>ChannelInboundMessageHandlerAdapter&lt;BigInteger&gt;</tt>.<ol><li>Replace <tt>channelDisconnected()</tt> with <tt>channelInactive()</tt>.</li><li><tt>handleUpstream()</tt> is not used anymore.</li></ol></li><li>Make <tt>BigIntegerDecoder</tt> extend <tt>ByteToMessageDecoder&lt;BigInteger&gt;</tt>.</li><li>Make <tt>NumberEncoder</tt> extend <tt>MessageToByteEncoder&lt;Number&gt;</tt>.<ol><li><tt>encode()</tt> does not return a buffer anymore. &nbsp;Fill the encoded data to the buffer provided by <tt>ByteToMessageDecoder</tt>.</li></ol></li></ol><h3 id="HPortingtheclient"><span>Porting the client</span></h3><p>Mostly same with porting the server, but you need to pay attention when you write a potentially large stream.</p><ol><li>Rewrite <tt>FactorialClient.run()</tt> method to use the new bootstrap API.</li><li>Rename <tt>FactorialClientPipelineFactory</tt> to <tt>FactorialClientInitializer</tt>.</li><li>Make <tt>FactorialClientHandler</tt> extends <tt>ChannelInboundMessageHandlerAdapter&lt;BigInteger&gt;</tt><ol><li>At this point, you find there is no <tt>Channel.isWritable()</tt> nor <tt>channelInterestChanged()</tt> in 4.0. &nbsp;Instead, you maintain the number of pending writes by yourself. &nbsp;The new <tt>sendNumbers()</tt> could look like the following:</li></ol></li></ol><script src="New+and+Noteworthy_files/3057879.js"></script><link href="New+and+Noteworthy_files/embed-0af287a4b5c981db301049e56f06e5d3.css" media="screen" rel="stylesheet"><div id="gist3057879" class="gist">
      <div class="gist-file">
        <div class="gist-data gist-syntax">



  <div class="file-data">
    <table class="lines highlight" cellpadding="0" cellspacing="0">
      <tbody><tr>
        <td class="line-numbers">
          <span class="line-number" id="file-gistfile1-java-L1" rel="file-gistfile1-java-L1">1</span>
          <span class="line-number" id="file-gistfile1-java-L2" rel="file-gistfile1-java-L2">2</span>
          <span class="line-number" id="file-gistfile1-java-L3" rel="file-gistfile1-java-L3">3</span>
          <span class="line-number" id="file-gistfile1-java-L4" rel="file-gistfile1-java-L4">4</span>
          <span class="line-number" id="file-gistfile1-java-L5" rel="file-gistfile1-java-L5">5</span>
          <span class="line-number" id="file-gistfile1-java-L6" rel="file-gistfile1-java-L6">6</span>
          <span class="line-number" id="file-gistfile1-java-L7" rel="file-gistfile1-java-L7">7</span>
          <span class="line-number" id="file-gistfile1-java-L8" rel="file-gistfile1-java-L8">8</span>
          <span class="line-number" id="file-gistfile1-java-L9" rel="file-gistfile1-java-L9">9</span>
          <span class="line-number" id="file-gistfile1-java-L10" rel="file-gistfile1-java-L10">10</span>
          <span class="line-number" id="file-gistfile1-java-L11" rel="file-gistfile1-java-L11">11</span>
          <span class="line-number" id="file-gistfile1-java-L12" rel="file-gistfile1-java-L12">12</span>
          <span class="line-number" id="file-gistfile1-java-L13" rel="file-gistfile1-java-L13">13</span>
          <span class="line-number" id="file-gistfile1-java-L14" rel="file-gistfile1-java-L14">14</span>
          <span class="line-number" id="file-gistfile1-java-L15" rel="file-gistfile1-java-L15">15</span>
          <span class="line-number" id="file-gistfile1-java-L16" rel="file-gistfile1-java-L16">16</span>
          <span class="line-number" id="file-gistfile1-java-L17" rel="file-gistfile1-java-L17">17</span>
          <span class="line-number" id="file-gistfile1-java-L18" rel="file-gistfile1-java-L18">18</span>
          <span class="line-number" id="file-gistfile1-java-L19" rel="file-gistfile1-java-L19">19</span>
          <span class="line-number" id="file-gistfile1-java-L20" rel="file-gistfile1-java-L20">20</span>
          <span class="line-number" id="file-gistfile1-java-L21" rel="file-gistfile1-java-L21">21</span>
          <span class="line-number" id="file-gistfile1-java-L22" rel="file-gistfile1-java-L22">22</span>
          <span class="line-number" id="file-gistfile1-java-L23" rel="file-gistfile1-java-L23">23</span>
          <span class="line-number" id="file-gistfile1-java-L24" rel="file-gistfile1-java-L24">24</span>
          <span class="line-number" id="file-gistfile1-java-L25" rel="file-gistfile1-java-L25">25</span>
          <span class="line-number" id="file-gistfile1-java-L26" rel="file-gistfile1-java-L26">26</span>
          <span class="line-number" id="file-gistfile1-java-L27" rel="file-gistfile1-java-L27">27</span>
          <span class="line-number" id="file-gistfile1-java-L28" rel="file-gistfile1-java-L28">28</span>
        </td>
        <td class="line-data">
          <pre class="line-pre"><div class="line" id="file-gistfile1-java-LC1">    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">sendNumbers</span><span class="o">()</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC2">        <span class="c1">// Do not send more than 4096 numbers.</span></div><div class="line" id="file-gistfile1-java-LC3">        <span class="kt">boolean</span> <span class="n">finished</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC4">        <span class="n">MessageBuf</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span> <span class="n">out</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">nextOutboundMessageBuffer</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC5">        <span class="k">while</span> <span class="o">(</span><span class="n">out</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">4096</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC6">            <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">count</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC7">                <span class="n">out</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">i</span><span class="o">));</span></div><div class="line" id="file-gistfile1-java-LC8">                <span class="n">i</span> <span class="o">++;</span></div><div class="line" id="file-gistfile1-java-LC9">            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC10">                <span class="n">finished</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC11">                <span class="k">break</span><span class="o">;</span></div><div class="line" id="file-gistfile1-java-LC12">            <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC13">        <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC14">&nbsp;</div><div class="line" id="file-gistfile1-java-LC15">        <span class="n">ChannelFuture</span> <span class="n">f</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC16">        <span class="k">if</span> <span class="o">(!</span><span class="n">finished</span><span class="o">)</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC17">            <span class="n">f</span><span class="o">.</span><span class="na">addListener</span><span class="o">(</span><span class="n">SEND_NUMBERS</span><span class="o">);</span></div><div class="line" id="file-gistfile1-java-LC18">        <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC19">    <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC20">&nbsp;</div><div class="line" id="file-gistfile1-java-LC21">    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ChannelFutureListener</span> <span class="n">SEND_NUMBERS</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChannelFutureListener</span><span class="o">()</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC22">        <span class="nd">@Override</span></div><div class="line" id="file-gistfile1-java-LC23">        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">operationComplete</span><span class="o">(</span><span class="n">ChannelFuture</span> <span class="n">future</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC24">            <span class="k">if</span> <span class="o">(</span><span class="n">future</span><span class="o">.</span><span class="na">isSuccess</span><span class="o">())</span> <span class="o">{</span></div><div class="line" id="file-gistfile1-java-LC25">                <span class="n">sendNumbers</span><span class="o">();</span></div><div class="line" id="file-gistfile1-java-LC26">            <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC27">        <span class="o">}</span></div><div class="line" id="file-gistfile1-java-LC28">    <span class="o">};</span></div></pre>
        </td>
      </tr>
    </tbody></table>
  </div>

        </div>

        <div class="gist-meta">
          <a href="https://gist.github.com/trustin/3057879/raw/503939143d885437b0fc416cd10073a95f903571/gistfile1.java" style="float:right">view raw</a>
          <a href="https://gist.github.com/trustin/3057879#file-gistfile1-java" style="float:right; margin-right:10px; color:#666;">gistfile1.java</a>
          <a href="https://gist.github.com/trustin/3057879">This Gist</a> brought to you by <a href="http://github.com/">GitHub</a>.
        </div>
      </div>
</div>

</div>


    <div class="clearfloats"></div>
  </div>      <div id="xwikidata" class="layoutsubsection">
                
    
                      <div id="docextraanchors" class="invisible">
<span id="Annotationsanchor">&nbsp;</span><span id="Attachmentsanchor">&nbsp;</span><span id="Historyanchor">&nbsp;</span><span id="Informationanchor">&nbsp;</span></div>
  <div id="xwikidatacontents">
    <div class="floatcontainer" id="docExtraTabs">
      <ul class="xwikitabbar" id="docExtrasTabsUl">
                  <li class="active" id="Annotationstab">
            <a id="Annotationslink" href="#Annotations">
              Annotations  <span class="itemCount">(0)</span>             </a>
          </li>
                  <li id="Attachmentstab">
            <a id="Attachmentslink" href="#Attachments">
              Attachments  <span class="itemCount">(0)</span>             </a>
          </li>
                  <li id="Historytab">
            <a id="Historylink" href="#History">
              History             </a>
          </li>
                  <li id="Informationtab">
            <a id="Informationlink" href="#Information">
              Information             </a>
          </li>
              </ul>
    </div>
                <div class="" id="docextrapanes">
              <div id="Annotationspane" class=""><p class="noitems">No annotations for this document</p></div>
              <div id="Attachmentspane" class="hidden empty"></div>
              <div id="Historypane" class="hidden empty"></div>
              <div id="Informationpane" class="hidden empty"></div>
          </div>
                <script type="text/javascript">
      var hashviewer = self.document.location.hash.substring(1);
                                                var extraInit = function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", false) };
                if (hashviewer == "Annotations") {
          var extraInit = function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", true) };
        }
                                if ($("Annotationslink") != null) {
          $("Annotationslink").href="#Annotations";
          Event.observe($("Annotationslink"), "click", function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", false); }, false);
        }
                                if ($("tmShowAnnotations") != null) {
          $("tmShowAnnotations").href="#Annotations";
          Event.observe($("tmShowAnnotations"), "click", function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", true); }, false);
        }
                                if ($("annotationsshortcut") != null) {
          $("annotationsshortcut").down('a').href="#annotations";
          Event.observe($("annotationsshortcut"), "click", function(){ XWiki.displayDocExtra("Annotations", "annotationsinline.vm", true); }, false);
        }
                                                                              if (hashviewer == "Attachments") {
          var extraInit = function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", true) };
        }
                                if ($("Attachmentslink") != null) {
          $("Attachmentslink").href="#Attachments";
          Event.observe($("Attachmentslink"), "click", function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", false); }, false);
        }
                                if ($("tmShowAttachments") != null) {
          $("tmShowAttachments").href="#Attachments";
          Event.observe($("tmShowAttachments"), "click", function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", true); }, false);
        }
                                if ($("attachmentsshortcut") != null) {
          $("attachmentsshortcut").down('a').href="#attachments";
          Event.observe($("attachmentsshortcut"), "click", function(){ XWiki.displayDocExtra("Attachments", "attachmentsinline.vm", true); }, false);
        }
                                                                              if (hashviewer == "History") {
          var extraInit = function(){ XWiki.displayDocExtra("History", "historyinline.vm", true) };
        }
                                if ($("Historylink") != null) {
          $("Historylink").href="#History";
          Event.observe($("Historylink"), "click", function(){ XWiki.displayDocExtra("History", "historyinline.vm", false); }, false);
        }
                                if ($("tmShowHistory") != null) {
          $("tmShowHistory").href="#History";
          Event.observe($("tmShowHistory"), "click", function(){ XWiki.displayDocExtra("History", "historyinline.vm", true); }, false);
        }
                                if ($("historyshortcut") != null) {
          $("historyshortcut").down('a').href="#history";
          Event.observe($("historyshortcut"), "click", function(){ XWiki.displayDocExtra("History", "historyinline.vm", true); }, false);
        }
                                                                              if (hashviewer == "Information") {
          var extraInit = function(){ XWiki.displayDocExtra("Information", "informationinline.vm", true) };
        }
                                if ($("Informationlink") != null) {
          $("Informationlink").href="#Information";
          Event.observe($("Informationlink"), "click", function(){ XWiki.displayDocExtra("Information", "informationinline.vm", false); }, false);
        }
                                if ($("tmShowInformation") != null) {
          $("tmShowInformation").href="#Information";
          Event.observe($("tmShowInformation"), "click", function(){ XWiki.displayDocExtra("Information", "informationinline.vm", true); }, false);
        }
                                if ($("informationshortcut") != null) {
          $("informationshortcut").down('a').href="#information";
          Event.observe($("informationshortcut"), "click", function(){ XWiki.displayDocExtra("Information", "informationinline.vm", true); }, false);
        }
                                            document.observe("dom:loaded", extraInit, false);
    </script>
  </div> </div>  
<div id="disqus_thread_wrapper" class="layoutsubsection">
  <div id="disqus_thread"><div style="display: none;" id="dsq-content-stub"><img alt="DISQUS" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAARCAYAAAH4YIFjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABwdJREFUeNpi/P//PwMhwAIiGBkZGeK6V8JVh9rqdfrc0ixnEDb+wPD2rAAjMSYBBBBRisDWwKxCthIE/q8Q+A8yhCiTAAIIrCi+ZxVMZSAQr19UGs4IMxWd/X8Rw3/GOKDhW43fgzwF1hX7n5EJ2dSp2QFNUKcZwJ31/78CkvPBGkGGMXidSUTWCxBAxAUAEQAcJzCvIXsDBPwsNBU2nbj+AMpdsFA8PAHsLZj3QC5D9hrIAEtN+RMwAzRkxcB0iK3eQ6iQIRAnoMTE//8CyHwmWHQdv/7QAiZ44/ErMP383acsqNB5iMnPlsFdsUZ6IU3CCCCA4AYBw8kBJgj06gGkmHJAFgPyQV4ExeQEoNgHJHUBQMoAWRzoerBeYHgeQOJ/APIvQPkNUP4EuIdADBAGBRMQOABxQcakdSipHZldNGvL2zWHL8kD1d0HieVN33QYqnc/EAfULNwJVw8KTniQwvjAdPz/SEwKmL1KfC5QjwEQr4e5AyVdA3P4ASCe8O3nb1whmtib6r3IXlfpATBEFbpWH9ygJSdmBtXrOHPbyZWPXn1AqOZRwDSBS+YHo82SOQwiZnYMoS+EGC42nGdYzBiAnKpgGAbeA3ECkjwYQNnzH758///6o5cgofVIagy+/vgFF//y/ecHJLn1/18AA+/teZBcPZL4eSTxBJg7AAKIaomRmpkeV2IG5UcDpMSsAM2zF4BiG9DUFaCLQxPwBWCC/QBkg/QqoCVuEN4ASuDIaWc/DIMSItBxH0GCrkaqCVBxWO4BJWBQcK/PmrL+I1S8H0i9h4mjFfX7GTRyIdEuHzIfZtb/Zdw3oGyQnvP/d9pNgRc+MLCwJMxxWk7AI6Ar+YCWVSLLyYkJzIYlZqC6RGBhbg/lFwDlQHoDgfgALLfhjY8/X9XhpWPs/wWM7odyMBwDylU8nOzyILYIH3cZslxBgM0cKHM+MOTAGCZnri7XCdS7ASgGLsc/fPlug9cxlrO/wUvYxYwJwCgLwHAMcrVlqCJ9BVlchJ+7EhRyQPwAyGaAFnhgsOPMzUhQroLVAU76yp/gGp/vtQbTr45pwMWOp1oDQ6QQiGEi6+EJGLmah0YJQ6CVtu3ivecKYHIpE9b8BPqcDSnawHSSu8m3eTvPyAHlzsPkDl25/wXMYAOq+XgtBFwIfn/GwCAOSq8HYCGCsNh8+hvksgYZIJchDkjljAKoHAKVJ6ByBbnmA5XESOL1oFIZSc9/cJkC1IukPuH/z/cw8fswdwyqcgYgwAaVYwYbQEnDSI1LbGABEDcCC1lYS4yhfO42n+fvPm9GKsAZkfJDA7RcwwYmQM1CbpUUADU3AB3AjxJ7wFwAFGsAqp2A0mBDahww8Gv4Mvrf2AKXWyMzgeHbk3wwh5X/DGPkR1OoHlCmn49cGCABkL8SgZn8ANbAQQaV4ZBK6yGwgbDr3G2GNx+/gkqShMTe1V///vsnA/KYjoKECjBwMPQCW0EngOrNQWxbHQWGFA8zBlAj5eztpwwbjl9lyPG1DFOUEAIFDqxJB6ksoC1ZN2NVsDm7zt4GNUhBgdUPrXwckWtQOJB0VQE2XRF8UQt9hodrIGw+FaDcWVjAwAshhsD7kAbPO2Dr78ZEBoZfHxQYHNYbwEogvIGjKSfOiNysBpaEL/acv8MODBhuUX7u00BhVVx6DZWlxHcDAxQEDl95AMZQAGqHLlSSFIanAnZWll0/f/8Bs2OcDB+5GavJVyGZtevsrYdL9p2XQ6rZGcnKI54nZRj2uoMCAVr4K8JkQAKgJsdEYN12AbmYYSGqYGJk/NC8bO91WHKUFRXgwace6ElDIF4PjHWHc3eeMZy98xSU8mB1mwE0FSQCU8ECZiZGVpi+yw9eLIfVlUyMjIf+/f/Pu/bIlTtIdSX5hauo+RagxxMZfr2fwHB3IT/Dy4MMDI/BzTABaP2aAGzmgPpN4gQDB1pmgIA+EAfcfvoGXl/mB1hXFuBxCLDs6oc26kBJZiIoxShLCqs9e/tp+vdfv8ENB08Tdf9FwHKsMtxxTfvK/SGgbHfx3vNyoL2g7DjR30r74vqjV2yA6lXgbnI2WtoH4yhEfGF4sAISSTcm9wOzDcidoE6lPTBLwRuyDMoJ5+DZagnLJIb/f3mh5edGcKoRs+5neHUUUgZxiIrhrK2wFchc7KwMmsByANjiAZUfoGzhCEpJIDlQowOYffqRC2RQS+f1x68HNx6/ygcqY9A7RMZAc5LcTS/zcLLZwcwB1evAzs/8pfsvwDu9yOplgRECzF4M8a7Gryw05NRB+sDtiC/3HjKcKeaDpgAEADVmNIDlsX4DqFPmCOvvMNxdkAAuX95dQFUPKnv06kEBmQgNOLpV5QbQpAsrcz4QUC+AVJsgqxcgoNcBqQy5QIIdONUDALcn6c0dtMJ9AAAAAElFTkSuQmCC" height="17" width="71"><img alt="..." src="data:image/gif;base64,R0lGODlhEAALAPQAAP///z2LqeLt8dvp7u7090GNqz2LqV+fuJ/F1IW2ycrf51aatHWswaXJ14i4ys3h6FmctUCMqniuw+vz9eHs8fb5+meku+Tu8vT4+cfd5bbT3tbm7PH2+AAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA" style="margin:0 0 3px 5px" height="11" width="16"></div><div class="clearfix" style="display: block;" id="dsq-content">      <div id="dsq-global-toolbar" class="dsq-clearfix">        <ul class="dsq-global-toolbar-right dsq-clearfix">                            <li class="dsq-community-box">                <a href="#" class="dsq-toolbar-item dsq-tt" onclick="DISQUS.dtpl.actions.fire('community.show'); return false" title="Expand Community Box"><span class="dsq-toolbar-icon"></span></a>            </li>                            <li class="dsq-global-toolbar-dropdown-container">                    <div id="dsq-toolbar-dropdown">    <a href="#" class="dsq-toolbar-logo dsq-toolbar-item dsq-clearfix"><span class="dsq-toolbar-icon">Disqus</span></a>    <div id="dsq-toolbar-dropdown-wrap" style="display: none">      <ul class="dsq-clearfix">                    <li class="dsq-login-link"><a href="#" onclick="DISQUS.dtpl.actions.fire('auth.login'); return false"><span class="dsq-toolbar-icon"></span><span class="dsq-toolbar-label">Login</span></a></li>                    <li class="dsq-about-link"><a href="http://disqus.com/" target="_blank"><span class="dsq-toolbar-icon"></span><span class="dsq-toolbar-label">About Disqus</span></a></li>      </ul>    </div>  </div>            </li>        </ul>                <ul class="dsq-global-toolbar-left dsq-clearfix">            <li class="dsq-like-thread">                <a href="#" id="dsq-like-thread-button" class="dsq-toolbar-item dsq-clearfix  dsq-tt" onclick="DISQUS.dtpl.actions.fire('thread.vote', 1); return false;" title="I like this page">                    <span class="dsq-toolbar-icon"></span>                    <span class="dsq-toolbar-label">Like</span>                </a>            </li>            <li class="dsq-dislike-thread">                <a href="#" id="dsq-dislike-thread-button" class="dsq-toolbar-item dsq-clearfix  dsq-tt" onclick="DISQUS.dtpl.actions.fire('thread.vote', -1); return false" title="I don't like this page">                    <span class="dsq-toolbar-icon">Dislike</span>                </a>            </li>            <li class="dsq-like-panel">                <ul class="dsq-like-faces dsq-clearfix">                        <li class="dsq-like-activity">        12 people liked this.    </li>                </ul>            </li>        </ul>            </div>    <div id="dsq-like-tooltip">      <div id="dsq-share-step-1" class="dsq-share-step">        <h3>Glad you liked it. Would you like to share?</h3>        <p class="dsq-tooltip-checkbox"><input id="dsq-share-thread-facebook" value="Facebook" type="checkbox"><label for="dsq-share-thread-facebook"><span class="dsq-facebook">Facebook</span></label></p>        <p class="dsq-tooltip-checkbox"><input id="dsq-share-thread-twitter" value="Twitter" type="checkbox"><label for="dsq-share-thread-twitter"><span class="dsq-twitter">Twitter</span></label></p>        <ul id="dsq-tooltip-actions">                        <li><a href="#" onclick="DISQUS.dtpl.actions.fire('thread.share.send'); return false" class="dsq-primary-action">Share</a></li>                    <li><a href="#" onclick="DISQUS.dtpl.actions.fire('thread.share.cancel'); return false" class="dsq-secondary-action">No thanks</a></li>        </ul>      </div>      <div id="dsq-share-step-2" class="dsq-share-step" style="display:none !important">        <p>Sharing this page …</p>      </div>      <div id="dsq-share-step-3" class="dsq-share-step" style="display:none !important">        <p>Thanks! <a href="#" class="dsq-tooltip-decline" onclick="DISQUS.dtpl.actions.fire('thread.share.cancel'); return false">Close</a></p>      </div>    </div>                                <div class="dsq-reply " id="dsq-reply">          <div id="dsq-account-dropdown">                  <a href="#" onclick="DISQUS.dtpl.actions.fire('auth.login'); return false;">Login</a>              </div>      <h3>Add New Comment</h3>        <div class="dsq-avatar">              <img src="New+and+Noteworthy_files/noavatar32.png">          </div>    <div class="dsq-textarea dsq-textarea-reply">      <div class="dsq-textarea-background">        <div style="height: auto;" class="dsq-textarea-wrapper">          <!-- filled dynamically -->        <iframe style="height: 58px;" src="New+and+Noteworthy_files/reply_ssl.html" id="easyXDM_DISQUS_net_default7700_provider" name="easyXDM_DISQUS_net_default7700_provider" frameborder="0" scrolling="no"></iframe></div>                <div class="dsq-post-tools">          <ul>            <li class="dsq-post-as">                                <button type="button" class="dsq-button" onclick="DISQUS.dtpl.actions.fire('comments.validate', null, this);">                    Post as …                  </button>                          </li>                        <li class="dsq-share-on dsq-clearfix">                            </li>          </ul>        </div>      </div>    </div>  </div>                              <div id="dsq-sort-by">    <select id="dsq-sort-select" onchange="DISQUS.dtpl.actions.fire('thread.sort', this.value);">              <option value="hot" selected="selected">          Sort by popular now        </option>              <option value="best">          Sort by best rating        </option>              <option value="newest">          Sort by newest first        </option>              <option value="oldest">          Sort by oldest first        </option>          </select>  </div>      <h3>            Showing <span id="dsq-num-posts">5</span> of <span id="dsq-total-posts">16</span> comments        </h3>        <ul id="dsq-comments">            <li id="comment-635539562">  </li><li id="dsq-comment-635539562" data-dsq-comment-id="635539562" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Anonymous's profile">      <a href="http://disqus.com/guest/4a8da49e99c5bf58949242e6ab88bace/" onclick="DISQUS.dtpl.actions.fire('profile.show', 635539562, null); return false">        <img src="New+and+Noteworthy_files/noavatar32.png" class="dsq-deferred-avatar" data-src="https://www.gravatar.com/avatar.php?default=https%3A%2F%2Fsecurecdn.disqus.com%2F1360872419%2Fimages%2Fnoavatar32.png&amp;size=32&amp;gravatar_id=4a8da49e99c5bf58949242e6ab88bace" alt="">      </a>    </div>    <div id="dsq-comment-body-635539562" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Anonymous</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire('comments.collapse', 635539562); return false;"><span>Collapse</span></a>        <a href="#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire('comments.expand', 635539562); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-635539562">                <div class="dsq-comment-text" id="dsq-comment-text-635539562">        <p>Problem: The ChannelInitializer.initChannel() method is called every time a client connects.<br>This
 means the client can only connect once. Every time after that will fail
 because you are adding the same handlers to the pipeline - which is not
 allowed (at least not for the EchoServerHandler).<br></p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-635539562"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-635539562">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="#" onclick="DISQUS.dtpl.actions.fire('comments.like', this,635539562); return false">Like</a>        </li>                          <li>          <a href="#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire('comments.reply',635539562, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="#comment-635539562" onclick="DISQUS.dtpl.actions.fire('comments.permalink', 635539562);" title="Link to comment by Anonymous">          5 months ago      </a></li>            <li>          <a href="#" id="dsq-comment-like-count-635539562" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire('comments.showUserVotes', 635539562); return false">1          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire('comments.report', 635539562, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-635539562"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-635539562"></li>            <li id="comment-591865208">  </li><li id="dsq-comment-591865208" data-dsq-comment-id="591865208" class="dsq-comment dsq-clearfix        dsq-comment-is-parent                " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Daniel Bevenius's profile">      <a href="http://disqus.com/guest/1be2cab21d939dc1abb2ed47b46877c6/" onclick="DISQUS.dtpl.actions.fire('profile.show', 591865208, null); return false">        <img src="New+and+Noteworthy_files/noavatar32.png" class="dsq-deferred-avatar" data-src="https://www.gravatar.com/avatar.php?default=https%3A%2F%2Fsecurecdn.disqus.com%2F1360872419%2Fimages%2Fnoavatar32.png&amp;size=32&amp;gravatar_id=1be2cab21d939dc1abb2ed47b46877c6" alt="">      </a>    </div>    <div id="dsq-comment-body-591865208" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Daniel Bevenius</span>                <span class="dsq-collapsed-count">                      2 comments collapsed                  </span>                <a href="#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire('comments.collapse', 591865208); return false;"><span>Collapse</span></a>        <a href="#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire('comments.expand', 591865208); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-591865208">                <div class="dsq-comment-text" id="dsq-comment-text-591865208">        <p>Very nice summary, thanks!</p>

<p>One sentence that I struggled with was this:<br>Netty never calls the
 handler methods of the same&nbsp;ChannelHandler&nbsp;instance 
simultaneously if and only if the handler is not annotated 
with&nbsp;@Sharable, regardless the type of handler methods - inbound, 
outbound, or life cycle event handler methods.</p>

<p>Could that perhaps be written as:<br>Netty will never call a 
ChannelHandler's methods concurrently, unless the ChannelHandler is 
annotated with @Shareable. This is regardless of the type of handler 
methods - inbound&nbsp;outbound, or lifecycle event 
methods.Regards,/Daniel</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-591865208"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-591865208">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="#" onclick="DISQUS.dtpl.actions.fire('comments.like', this,591865208); return false">Like</a>        </li>                          <li>          <a href="#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire('comments.reply',591865208, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="#comment-591865208" onclick="DISQUS.dtpl.actions.fire('comments.permalink', 591865208);" title="Link to comment by Daniel Bevenius">          7 months ago      </a></li>            <li>          <a href="#" id="dsq-comment-like-count-591865208" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire('comments.showUserVotes', 591865208); return false">1          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire('comments.report', 591865208, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-591865208"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-591865208"></li>            <li id="comment-625605315">  </li><li id="dsq-comment-625605315" data-dsq-comment-id="625605315" class="dsq-comment dsq-clearfix                dsq-moderator        dsq-founder" style="margin-left:46px;">    <div class="dsq-avatar dsq-tt" title="Expand Trustin Lee's profile">      <a href="http://disqus.com/trustin/" onclick="DISQUS.dtpl.actions.fire('profile.show', 625605315, null); return false">        <img src="New+and+Noteworthy_files/noavatar32.png" class="dsq-deferred-avatar" data-src="https://securecdn.disqus.com/uploads/users/1892/1775/avatar32.jpg?1345635888" alt="">      </a>    </div>    <div id="dsq-comment-body-625605315" class="dsq-comment-body">      <div class="dsq-comment-header">        <a href="http://gleamynode.net/" target="_blank" class="dsq-commenter-name" rel="nofollow">Trustin Lee</a><span class="dsq-commenter-bio">, the best is yet to come</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire('comments.collapse', 625605315); return false;"><span>Collapse</span></a>        <a href="#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire('comments.expand', 625605315); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-625605315">                <div class="dsq-comment-text" id="dsq-comment-text-625605315">        <p>&nbsp;Hi
 Daniel - Thanks for your comment.&nbsp; I've just updated the 
page.&nbsp; By the way, you can edit this page by yourself. It's a Wiki.
 :-)</p>

<p></p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-625605315"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-625605315">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="#" onclick="DISQUS.dtpl.actions.fire('comments.like', this,625605315); return false">Like</a>        </li>                          <li>          <a href="#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire('comments.reply',625605315, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="#comment-625605315" onclick="DISQUS.dtpl.actions.fire('comments.permalink', 625605315);" title="Link to comment by Trustin Lee">          5 months ago      </a></li>              <li>          <a onclick="DISQUS.dtpl.actions.fire('comments.showParent', 591865208); return false" href="#comment-591865208" title="Jump to comment">            in reply to Daniel Bevenius          </a>        </li>            <li style="display:none">          <a href="#" id="dsq-comment-like-count-625605315" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire('comments.showUserVotes', 625605315); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire('comments.report', 625605315, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-625605315"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-625605315"></li>            <li id="comment-782252098">  </li><li id="dsq-comment-782252098" data-dsq-comment-id="782252098" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Tim Boudreau's profile">      <a href="http://disqus.com/facebook-571976629/" onclick="DISQUS.dtpl.actions.fire('profile.show', 782252098, null); return false">        <img src="New+and+Noteworthy_files/noavatar32.png" class="dsq-deferred-avatar" data-src="https://securecdn.disqus.com/uploads/users/3620/8665/avatar32.jpg?1359485520" alt="">      </a>    </div>    <div id="dsq-comment-body-782252098" class="dsq-comment-body">      <div class="dsq-comment-header">        <a href="http://www.facebook.com/tim.boudreau" target="_blank" class="dsq-commenter-name" rel="nofollow">Tim Boudreau</a>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire('comments.collapse', 782252098); return false;"><span>Collapse</span></a>        <a href="#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire('comments.expand', 782252098); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-782252098">                <div class="dsq-comment-text" id="dsq-comment-text-782252098">        <p>Holy refactoring, Batman!</p>

<p>Do you guys have any idea what your refactorings are doing to those 
of us trying to maintain a framework built on *top* of Netty? &nbsp;My 
continuous build gets broken every few days - the latest gem being when 
somebody decided they didn't like "get" on getters and renamed 
everything method like getSomething() to something(). &nbsp;I don't 
necessarily disagree about get being silly, but is there sometime that 
the refactoring madness will end?</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-782252098"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-782252098">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="#" onclick="DISQUS.dtpl.actions.fire('comments.like', this,782252098); return false">Like</a>        </li>                          <li>          <a href="#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire('comments.reply',782252098, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="#comment-782252098" onclick="DISQUS.dtpl.actions.fire('comments.permalink', 782252098);" title="Link to comment by Tim Boudreau">          2 weeks ago      </a></li>            <li style="display:none">          <a href="#" id="dsq-comment-like-count-782252098" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire('comments.showUserVotes', 782252098); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire('comments.report', 782252098, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-782252098"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-782252098"></li>            <li id="comment-776334616">  </li><li id="dsq-comment-776334616" data-dsq-comment-id="776334616" class="dsq-comment dsq-clearfix                        " style="margin-left:0px;">    <div class="dsq-avatar dsq-tt" title="Expand Arun George's profile">      <a href="http://disqus.com/google-c4c458d132817abc7f621c553c64db41/" onclick="DISQUS.dtpl.actions.fire('profile.show', 776334616, null); return false">        <img src="New+and+Noteworthy_files/noavatar32.png" class="dsq-deferred-avatar" data-src="https://securecdn.disqus.com/1360872419/images/noavatar32.png" alt="">      </a>    </div>    <div id="dsq-comment-body-776334616" class="dsq-comment-body">      <div class="dsq-comment-header">        <span class="dsq-commenter-name">Arun George</span>                <span class="dsq-collapsed-count">                      1 comment collapsed                  </span>                <a href="#" class="dsq-collapse-toggle dsq-collapse" title="Collapse thread" onclick="DISQUS.dtpl.actions.fire('comments.collapse', 776334616); return false;"><span>Collapse</span></a>        <a href="#" class="dsq-collapse-toggle dsq-expand" title="Expand thread" onclick="DISQUS.dtpl.actions.fire('comments.expand', 776334616); return false;"><span>Expand</span></a>      </div>        <div class="dsq-comment-message" id="dsq-comment-message-776334616">                <div class="dsq-comment-text" id="dsq-comment-text-776334616">        <p>"If
 multithreaded&nbsp;EventExecutor&nbsp;or&nbsp;EventLoop&nbsp;is 
specified, one of the threads will be chosen first and then the chosen 
thread will be used until deregistration." &nbsp;Does this mean that we 
need to do something extra for getting multithreading in addition to 
passing EventLoopGroup in bootstrap class.?</p>      </div>                        </div>            <!-- edit box dynamically inserted here -->      <div id="dsq-append-edit-776334616"></div>        <div class="dsq-comment-footer">    <ul class="dsq-comment-actions">              <li id="dsq-like-776334616">          <span class="dsq-like-thumb dsq-font">A</span>          <a href="#" onclick="DISQUS.dtpl.actions.fire('comments.like', this,776334616); return false">Like</a>        </li>                          <li>          <a href="#" class="dsq-comment-reply" onclick="DISQUS.dtpl.actions.fire('comments.reply',776334616, this); return false">Reply</a>        </li>         </ul>    <ul class="dsq-comment-meta">      <li>  <a href="#comment-776334616" onclick="DISQUS.dtpl.actions.fire('comments.permalink', 776334616);" title="Link to comment by Arun George">          3 weeks ago      </a></li>            <li style="display:none">          <a href="#" id="dsq-comment-like-count-776334616" class="dsq-comment-like-count" onclick="return DISQUS.dtpl.actions.fire('comments.showUserVotes', 776334616); return false">0          Like      </a>      </li>              <li class="dsq-comment-flag" style="visibility: hidden">          <a href="#" class="dsq-comment-flag dsq-font" onclick="return DISQUS.dtpl.actions.fire('comments.report', 776334616, false);">F</a>        </li>          </ul>  </div>      <!-- reply box dynamically inserted here -->      <div id="dsq-append-reply-776334616"></div>    </div>  </li>  <!-- new replies dynamically inserted here -->  <li id="dsq-append-post-776334616"></li>      </ul>        <div id="dsq-pagination">      <ul id="dsq-footer" class="dsq-clearfix">        <div id="dsq-subscribe">            <li>      <a href="#" class="dsq-subscribe-email" onclick="return DISQUS.dtpl.actions.fire('thread.subscribe');">        <span class="dsq-font">M</span> <em>Subscribe by email</em>      </a>    </li>    <li>    <a href="http://netty0.disqus.com/netty_new_and_noteworthy_documentationnew_and_noteworthy/latest.rss" class="dsq-subscribe-rss">      <span class="dsq-font">S</span> <em>RSS</em>    </a>  </li>    </div>  </ul>            <a class="dsq-more-button" href="#" onclick="DISQUS.dtpl.actions.fire('thread.paginate', 2, this); return false">        Load more comments      </a>        </div>          </div><div>  </div></div>
  <script type="text/javascript">
    var disqus_shortname = 'netty0';
    var disqus_identifier = '29457934741297594';
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


    </div>      </div>
  </div><div id="rightPanels" class="panels right">
            <div class="panel expanded QuickLinks"><h1 class="xwikipaneltitle">Quick Links</h1><div class="xwikipanelcontents"><ul><li><span class="wikilink"><a href="https://netty.io/Main/Downloads"><span class="wikigeneratedlinkcontent">Downloads</span></a></span></li><li><span class="wikilink"><a href="https://netty.io/Documentation/WebHome">Documentation</a></span></li><li><span class="wikilink"><a href="https://netty.io/Main/Related+Articles"><span class="wikigeneratedlinkcontent">Related Articles</span></a></span></li><li><span class="wikiexternallink"><a href="http://stackoverflow.com/questions/tagged/netty">Ask Questions</a></span></li><li><span class="wikilink"><a href="https://netty.io/Main/Get+Involved"><span class="wikigeneratedlinkcontent">Get Involved</span></a></span></li></ul><hr><ul><li><span class="wikilink"><a href="https://netty.io/Blog/WebHome">Blog</a></span> <span class="wikiexternallink"><a href="http://feeds.feedburner.com/netty_project"><img src="New+and+Noteworthy_files/rss-medium.png" alt="(RSS)" title="RSS feed for blog posts" class="icon rss"></a></span></li><li><span class="wikilink"><a href="https://netty.io/Main/Activity">Activity Stream</a></span> <span class="wikiinternallink"><a href="https://netty.io/Main/WebRss?xpage=rdf"><img src="New+and+Noteworthy_files/rss-medium.png" alt="(RSS)" title="RSS feed for recent changes" class="icon rss"></a></span></li><li><span class="wikilink"><a href="https://netty.io/Main/AllDocs">Document Index</a></span></li><li><iframe data-twttr-rendered="true" title="Twitter Follow Button" style="width: 169px; height: 20px;" class="twitter-follow-button twitter-follow-button" src="New+and+Noteworthy_files/follow_button.html" allowtransparency="true" frameborder="0" scrolling="no"></iframe><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id = id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);} }(document,"script","twitter-wjs");
</script></li></ul><span class="jmp-activator">Jump to any page in the wiki (Meta+G)</span></div></div>
                  <div class="panel expanded RecentPostsPanel"><h1 class="xwikipaneltitle">Recent Blog Posts</h1><div class="xwikipanelcontents"><ul><li><span class="wikilink"><a href="https://netty.io/Blog/Netty+400Beta1+out+now">Netty 4.0.0.Beta1 out now</a></span></li><li><span class="wikilink"><a href="https://netty.io/Blog/Netty+362Final+released">Netty 3.6.2.Final released</a></span></li><li><span class="wikilink"><a href="https://netty.io/Blog/Netty+361Final+out+%2D+More+SSL+fixes">Netty 3.6.1.Final out - More SSL fixes...</a></span></li></ul></div></div>
                  <div class="panel expanded RecentlyModified"><h1 class="xwikipaneltitle">Recently Modified</h1><div class="xwikipanelcontents"><p><span class="panelitem"><span class="wikilink"><a href="https://netty.io/Blog/Netty+400Beta1+out+now">Netty 4.0.0.Beta1 out now</a></span></span><span class="pitemseparator">&nbsp;|&nbsp;</span><span class="panelitem"><span class="wikilink"><a href="https://netty.io/Documentation/New+and+Noteworthy">New and Noteworthy</a></span></span><span class="pitemseparator">&nbsp;|&nbsp;</span><span class="panelitem"><span class="wikilink"><a href="https://netty.io/Main/Related+Projects">Related Projects</a></span></span><span class="pitemseparator">&nbsp;|&nbsp;</span><span class="panelitem"><span class="wikilink"><a href="https://netty.io/Documentation/Developer+Guide">Developer Guide</a></span></span><span class="pitemseparator">&nbsp;|&nbsp;</span><span class="panelitem"><span class="wikilink"><a href="https://netty.io/Main/Related+Articles">Related Articles</a></span></span></p></div></div>
      </div>

<div class="clearfloats"></div>
  </div></div><div id="ribbon"><a href="https://github.com/netty/netty"><img src="New+and+Noteworthy_files/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a></div>
<div id="footerglobal" class="layoutsection">
<div class="minwidth"></div>
<hr>
  <div id="xwikilicence">Copyright © 2013 <a href="http://netty.io/">The Netty Project</a></div>
<hr>
</div>
<script type="text/javascript">
  var disqus_shortname = 'netty0';
  (function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
  }());
</script>


</div></div>
<iframe src="New+and+Noteworthy_files/def.html" style="position: absolute; top: -2000px; left: 0px;" id="easyXDM_DISQUS_net_default7699_provider" name="easyXDM_DISQUS_net_default7699_provider" frameborder="0"></iframe></body></html>